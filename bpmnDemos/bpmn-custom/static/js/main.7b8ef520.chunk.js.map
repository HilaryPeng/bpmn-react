{"version":3,"sources":["components/Header/index.module.less","components/EditingTools/index.module.less","containers/Bpmn.module.less","containers/modeler/customPalette/palette/Palette.js","containers/modeler/customPalette/palette/index.js","containers/modeler/customPalette/CustomPalette.js","containers/modeler/customPalette/CustomContextPadProvider.js","containers/modeler/customPalette/CustomRenderer.js","containers/modeler/customPalette/index.js","containers/modeler/keyboard/BpmnKeyBindings.js","containers/modeler/keyboard/index.js","containers/modeler/customTranslate/translationsGerman.js","containers/modeler/customTranslate/index.js","containers/modeler/customTranslate/customTranslate.js","containers/modeler/resizeAllRules/ResizeAllRules.js","containers/modeler/resizeAllRules/index.js","containers/modeler/color-picker/ColorPicker.js","containers/modeler/color-picker/ColoredRenderer.js","containers/modeler/color-picker/index.js","containers/modeler/transactionBoundaries/Util.js","containers/modeler/transactionBoundaries/TransactionBoundaries.js","containers/modeler/transactionBoundaries/index.js","containers/modeler/index.js","resources/defaultData.js","components/Header/index.jsx","components/EditingTools/index.jsx","containers/index.jsx","utils/index.js","App.jsx","resources/newDiagram.js","index.js"],"names":["module","exports","header","logo-container","logo","systemName","editingTools","controlList","control","openFile","line","zoom","zoomIn","zoomOut","undo","redo","save","download","image","open","container","canvas","ELEMENT_SELECTOR","concat","Palette","eventBus","this","_eventBus","_canvas","_providers","self","on","event","tool","updateToolHighlight","_update","_diagramInitialized","length","_init","$inject","prototype","registerProvider","provider","push","_container","getEntries","entries","forEach","e","getPaletteEntries","entry","id","domify","HTML_MARKUP","parent","domClosest","getContainer","insertBefore","children","domDelegate","bind","target","delegateTarget","domMatches","toggle","slide","trigger","domEvent","stopPropagation","_layoutChanged","fire","_toggleState","state","_getParentContainer","cls","domClasses","twoColumn","_needsCollapse","clientHeight","_entries","isOpen","entriesContainer","domQuery","domClear","items","grouping","group","content","title","appendChild","add","html","separator","icon","className","label","domAttr","imageUrl","action","autoActivate","button","preventDefault","item","handler","originalEvent","isFunction","availableHeight","Object","keys","close","contentClasses","headerClasses","has","remove","containerClasses","setAttribute","isActiveTool","_activeTool","name","_toolsContainer","toolsContainer","actionName","getAttribute","toolClasses","replace","contains","customPalette_palette","__init__","palette","CustomPalette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate","_this","classCallCheck","actions","customJson","window","customData","createAction","type","options","customType","createListener","shape","createShape","assign","businessObject","di","isExpanded","start","shortType","dragstart","click","createParticipant","collapsed","createParticipantShape","activateHand","activateSelection","objectSpread","imgDataUrl","CustomContextPadProvider","injector","invoke","ContextPadProvider","cached","getContextPadEntries","element","initProperties","inherits","CustomRenderer","BaseRenderer","call","canRender","bo","filter","drawShape","href","customShapeData","customGfx","svgCreate","x","y","width","height","svgAppend","customPalette","__depends__","PaletteModule","contextPadProvider","customRenderer","paletteProvider","BpmnKeyBindings","keyboard","editorActions","addListener","key","modeler_keyboard","KeyboardModule","bpmnKeyBindings","translationsGerman","Activate the global connect tool","Append {type}","Add Lane above","Divide into two Lanes","Divide into three Lanes","Add Lane below","Append compensation activity","Change type","Connect using Association","Connect using Sequence/MessageFlow or Association","Connect using DataInputAssociation","Remove","Tools","Activate the hand tool","Activate the lasso tool","Activate the create/remove space tool","Create expanded SubProcess","Create IntermediateThrowEvent/BoundaryEvent","Create Pool/Participant","Parallel Multi Instance","Sequential Multi Instance","DataObjectReference","Data Reference","Create DataObjectReference","Create DataStoreReference","Loop","Ad-hoc","Create {type}","Task","Create Task","Send Task","Receive Task","User Task","Create UserTask","Manual Task","Business Rule Task","Service Task","Create ServiceTask","Script Task","Call Activity","Sub Process (collapsed)","Sub Process (expanded)","Events","Start Event","StartEvent","Create StartEvent","Intermediate Throw Event","Create IntermediateThrowEvent","End Event","EndEvent","Create EndEvent","Create Intermediate/Boundary Event","Append Intermediate/Boundary Event","Boundary Event Timer","Message Start Event","Timer Start Event","Conditional Start Event","Signal Start Event","Error Start Event","Escalation Start Event","Compensation Start Event","Message Start Event (non-interrupting)","Timer Start Event (non-interrupting)","Conditional Start Event (non-interrupting)","Signal Start Event (non-interrupting)","Escalation Start Event (non-interrupting)","Message Intermediate Catch Event","Message Intermediate Throw Event","Timer Intermediate Catch Event","Escalation Intermediate Throw Event","Conditional Intermediate Catch Event","Link Intermediate Catch Event","Link Intermediate Throw Event","Compensation Intermediate Throw Event","Signal Intermediate Catch Event","Signal Intermediate Throw Event","Intermediate Event Catch Timer","Message End Event","Escalation End Event","Error End Event","Cancel End Event","Compensation End Event","Signal End Event","Terminate End Event","Message Boundary Event","Message Boundary Event (non-interrupting)","Timer Boundary Event","Timer Boundary Event (non-interrupting)","Escalation Boundary Event","Escalation Boundary Event (non-interrupting)","Conditional Boundary Event","Conditional Boundary Event (non-interrupting)","Error Boundary Event","Cancel Boundary Event","Signal Boundary Event","Signal Boundary Event (non-interrupting)","Compensation Boundary Event","Gateways","Create Gateway","Append Gateway","Exclusive Gateway","Create ExclusiveGateway","Parallel Gateway","Create ParallelGateway","Inclusive Gateway","Complex Gateway","Event based Gateway","Transaction","Sub Process","Event Sub Process","Collapsed Pool","Expanded Pool","TextAnnotation","Create custom:triangle","Create custom:circle","no parent for {element} in {parent}","no shape type specified","flow elements must be children of pools/participants","out of bounds release","more than {count} child lanes","element required","diagram not part of bpmn:Definitions","no diagram to display","no process or collaboration to display","element {element} referenced by {referenced}#{property} not yet drawn","already rendered {element}","failed to import {element}","Id","Name","General","Details","Message Name","Message","Initiator","Asynchronous Continuations","Asynchronous Before","Asynchronous After","Job Configuration","Exclusive","Job Priority","Retry Time Cycle","Documentation","Element Documentation","History Configuration","History Time To Live","Forms","Form Key","Form Fields","Business Key","Form Field","ID","Type","Label","Default Value","Validation","Add Constraint","Config","Properties","Add Property","Value","Listeners","Execution Listener","Event Type","Listener Type","Java Class","Expression","Must provide a value","Parameter must have a name","Delegate Expression","Script","Script Format","Script Type","Inline Script","External Script","Resource","Field Injection","Extensions","Input/Output","Input Parameters","Output Parameters","Parameters","Output Parameter","Timer Definition Type","Timer Definition","Date","Duration","Cycle","Signal","Signal Name","Escalation","Error","Link Name","Condition","Variable Name","Variable Event","Specify more than one variable change event as a comma separated list.","Wait for Completion","Activity Ref","Version Tag","Executable","External Task Configuration","Task Priority","External","Connector","Must configure Connector","Connector Id","Implementation","Field Injections","Fields","Result Variable","Topic","Configure Connector","Input Parameter","Assignee","Candidate Users","Candidate Groups","Due Date","Follow Up Date","Priority","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)","Variables","Open minimap","Close minimap","ProcessControl","CustomTasks","Create CustomTaskDemo","Add Custom Tasks","Create CustomTask","This maps to the process definition key.","Candidate Starter Configuration","Candidate Starter Groups","Specify more than one group as a comma separated list.","Candidate Starter Users","Specify more than one user as a comma separated list.","Tasklist Configuration","Startable","modeler_customTranslate","template","replacements","translations","_","str","ResizeAllRules","RuleProvider","init","addRule","context","resizeAllRules","UpdateColorHandler","execute","oldColor","color","revert","ColoredRenderer","config","styles","pathMap","textRenderer","BpmnRenderer","is","bpmnShape","drawBpmnShape","svgAttr","fill","color_picker","colorPicker","contextPad","commandStack","changeColor","prompt","registerHandler","coloredRenderer","asTRBL","bounds","top","right","bottom","left","getOrientation","rect","reference","padding","isObject","rectOrientation","referenceOrientation","vertical","horizontal","TransactionBoundaries","elementRegistry","overlays","_overlays","_elementRegistry","active","hide","show","_getTransactionBoundaries","loopCharacteristics","eventDefinitionType","eventDefinitions","$type","isWaitStateTask","isWaitStateGateway","isWaitStateEvent","isAsyncAfter","asyncAfter","isAsyncBefore","asyncBefore","boundariesBefore","before","after","_getTransactionBoundaryElements","transactionBoundaryElements","transactionBoundaries","boundaries","_addOverlay","waypoint","orientation","position","test","defaultLength","incoming","connection","waypoints","outgoing","modeler_transactionBoundaries","CustomModeler","Modeler","_modules","CustomTranslate","ResizeAllModule","minimapModule","sketchyRendererModule","ColorPickerModule","resources_defaultData","imgSelectedDataUrl","class","async","exclusive","jobPriority","timeCycle","body","documentation","text","listener","values","fields","string","expression","inputOutput","inputParameters","value","outputParameters","injectField","extendProperties","Header","react_default","a","createElement","EditingTools","handleOpen","file","_this2","_this$props","props","onOpenFIle","onZoomIn","onZoomOut","onZoomReset","onUndo","onRedo","onSave","onDownloadXml","onDownloadSvg","ref","onChange","onClick","Component","axios","defaults","retry","retryDelay","Bpmn","possibleConstructorReturn","getPrototypeOf","openDiagram","xml","assertThisInitialized","setState","isShowFold","bpmnModeler","importXML","err","message_default","error","defaultData","get","$","find","attr","isHasName","isEmpty","css","getBusinessObject","newSelection","next","createModdleElement","setEelementProperties","map","failedJobRetryTimeCycle","camundaExecutionListener","undefined","camundaInputOutput","camundaInjectField","camundaProperties","extensionElements","apply","toConsumableArray","handleOpenFile","that","files","reader","FileReader","data","readAsText","onload","result","handleSave","notification_default","destroy","modelId","jsonXml","svgXml","saveXML","format","saveSVG","formData","url","method","headers","Content-Type","transformRequest","ret","it","encodeURIComponent","then","res","success","message","isArray","notice","args","activityName","activityId","description","defaultDescription","duration","warn","catch","handleRedo","console","log","handleUndo","dataTrack","document","removeChild","handleDownloadSvg","handleDownloadXml","handleZoom","radio","scale","newScale","handlePanelFold","isShowPanel","callback","_this3","_window","BpmnModeler","propertiesPanel","additionalModules","propertiesPanelModule","propertiesProviderModule","moddleExtensions","camunda","camundaModdleDescriptor","bpmnRenderer","defaultFillColor","defaultStrokeColor","bindTo","FileList","addEventListener","dataTransfer","dropEffect","info","preProperties","extensions","general","updateProperties","resultVariable","delegateExpression","modeling","preId","indexOf","initData","preProperty","isNotInit","_this4","_this$state","Fragment","style","components_EditingTools","debounce","App","isCustomLoaded","isXmlLoaded","overflow","containers_Bpmn","spin_default","tip","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.7b8ef520.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"index_header__2lblO\",\"logo-container\":\"index_logo-container__bJhDf\",\"logo\":\"index_logo__3u35-\",\"systemName\":\"index_systemName__2Sqt-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editingTools\":\"index_editingTools__PQHZq\",\"controlList\":\"index_controlList__2WC-x\",\"control\":\"index_control__EhZrz\",\"openFile\":\"index_openFile__g226O\",\"line\":\"index_line__2O6oE\",\"zoom\":\"index_zoom__dB37d\",\"zoomIn\":\"index_zoomIn__mZMLZ\",\"zoomOut\":\"index_zoomOut__3lsCn\",\"undo\":\"index_undo__zqT1j\",\"redo\":\"index_redo__3hJtM\",\"save\":\"index_save__TKKDp\",\"download\":\"index_download__3igtD\",\"image\":\"index_image__33KEo\",\"open\":\"index_open__1yShD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Bpmn_header__2lSBA\",\"container\":\"Bpmn_container__346eq\",\"canvas\":\"Bpmn_canvas__3p482\"};","import {\r\n  isFunction,\r\n  forEach\r\n} from 'min-dash';\r\n\r\nimport {\r\n  domify,\r\n  query as domQuery,\r\n  closest as domClosest,\r\n  attr as domAttr,\r\n  clear as domClear,\r\n  classes as domClasses,\r\n  matches as domMatches,\r\n  delegate as domDelegate,\r\n  event as domEvent\r\n} from 'min-dom';\r\n\r\n\r\nconst TOGGLE_SELECTOR = '.djs-collapse-header';\r\nconst ENTRY_SELECTOR = '.entry';\r\nconst SLIDE_SELECTOR = '.djs-palette-toggle';\r\nconst ELEMENT_SELECTOR = `${TOGGLE_SELECTOR}, ${ENTRY_SELECTOR}, ${SLIDE_SELECTOR}`;\r\n\r\nconst PALETTE_OPEN_CLS = 'open';\r\nconst PALETTE_TWO_COLUMN_CLS = 'two-column';\r\n\r\n\r\n/**\r\n * A palette containing modeling elements.\r\n */\r\nexport default function Palette(eventBus, canvas) {\r\n  this._eventBus = eventBus;\r\n  this._canvas = canvas;\r\n\r\n  this._providers = [];\r\n\r\n  const self = this;\r\n\r\n  eventBus.on('tool-manager.update', (event) => {\r\n    const { tool } = event;\r\n\r\n    self.updateToolHighlight(tool);\r\n  });\r\n\r\n  eventBus.on('i18n.changed', () => {\r\n    self._update();\r\n  });\r\n\r\n  eventBus.on('diagram.init', () => {\r\n    self._diagramInitialized = true;\r\n\r\n    // initialize + update once diagram is ready\r\n    if (self._providers.length) {\r\n      self._init();\r\n\r\n      self._update();\r\n    }\r\n  });\r\n}\r\n\r\nPalette.$inject = ['eventBus', 'canvas'];\r\n\r\n\r\n/**\r\n * Register a provider with the palette\r\n *\r\n * @param  {PaletteProvider} provider\r\n */\r\nPalette.prototype.registerProvider = function (provider) {\r\n  this._providers.push(provider);\r\n\r\n  // postpone init / update until diagram is initialized\r\n  if (!this._diagramInitialized) {\r\n    return;\r\n  }\r\n\r\n  if (!this._container) {\r\n    this._init();\r\n  }\r\n\r\n  this._update();\r\n};\r\n\r\n\r\n/**\r\n * Returns the palette entries for a given element\r\n *\r\n * @return {Array<PaletteEntryDescriptor>} list of entries\r\n */\r\nPalette.prototype.getEntries = function () {\r\n  const entries = {};\r\n\r\n  // loop through all providers and their entries.\r\n  // group entries by id so that overriding an entry is possible\r\n  forEach(this._providers, (provider) => {\r\n    const e = provider.getPaletteEntries();\r\n\r\n    forEach(e, (entry, id) => {\r\n      entries[id] = entry;\r\n    });\r\n  });\r\n\r\n  return entries;\r\n};\r\n\r\n\r\n/**\r\n * Initialize\r\n */\r\nPalette.prototype._init = function () {\r\n  const canvas = this._canvas;\r\n  const eventBus = this._eventBus;\r\n  this._container = domify(Palette.HTML_MARKUP);\r\n  const parent = domClosest(canvas.getContainer(), '.bjs-container');\r\n  const container = this._container;\r\n  const self = this;\r\n\r\n  parent.insertBefore(container, parent.children[0]);\r\n\r\n  domDelegate.bind(container, ELEMENT_SELECTOR, 'click', (event) => {\r\n    const target = event.delegateTarget;\r\n\r\n    // 菜单伸缩\r\n    if (domMatches(target, TOGGLE_SELECTOR)) {\r\n      return self.toggle(target);\r\n    }\r\n\r\n    // 左侧栏伸缩\r\n    if (domMatches(target, SLIDE_SELECTOR)) {\r\n      return self.slide(target);\r\n    }\r\n\r\n    self.trigger('click', event);\r\n  });\r\n\r\n  // prevent drag propagation\r\n  domEvent.bind(container, 'mousedown', (event) => {\r\n    event.stopPropagation();\r\n  });\r\n\r\n  // prevent drag propagation\r\n  domDelegate.bind(container, ENTRY_SELECTOR, 'dragstart', (event) => {\r\n    self.trigger('dragstart', event);\r\n  });\r\n\r\n  eventBus.on('canvas.resized', this._layoutChanged, this);\r\n\r\n  eventBus.fire('palette.create', {\r\n    container\r\n  });\r\n};\r\n\r\n/**\r\n * Update palette state.\r\n *\r\n * @param  {Object} [state] { open, twoColumn }\r\n */\r\nPalette.prototype._toggleState = function (state) {\r\n  state = state || {};\r\n\r\n  const parent = this._getParentContainer();\r\n  const container = this._container;\r\n  const eventBus = this._eventBus;\r\n  const cls = domClasses(container);\r\n  const twoColumn = state.twoColumn\r\n    || this._needsCollapse(parent.clientHeight, this._entries || {});\r\n\r\n  // always update two column\r\n  cls.toggle(PALETTE_TWO_COLUMN_CLS, twoColumn);\r\n  if ('open' in state) {\r\n    cls.toggle(PALETTE_OPEN_CLS, state.open);\r\n  }\r\n\r\n  eventBus.fire('palette.changed', {\r\n    twoColumn,\r\n    open: this.isOpen()\r\n  });\r\n};\r\n\r\nPalette.prototype._update = function () {\r\n  this._entries = this.getEntries();\r\n  const entriesContainer = domQuery('.djs-palette-entries', this._container);\r\n  const entries = this._entries;\r\n\r\n  domClear(entriesContainer);\r\n\r\n  forEach(entries, (items) => {\r\n    const grouping = items.group || 'default';\r\n\r\n    let container = domQuery(`[data-group=${grouping}]`, entriesContainer);\r\n    let content = domQuery('.djs-collapse-content', container);\r\n    const header = domify(`<div class=\"djs-collapse-header iconfont open\">${items.title}</div>`);\r\n\r\n    if (!container) {\r\n      container = domify(`<div class=\"group\" data-group=\"${grouping}\"></div>`);\r\n      content = domify('<div class=\"djs-collapse-content open\"></div>');\r\n      container.appendChild(header);\r\n      container.appendChild(content);\r\n      entriesContainer.appendChild(container);\r\n    }\r\n\r\n    // 如果不存在children，则不显示该菜单项\r\n    if (items.children.length === 0) {\r\n      const containerClass = domClasses(container);\r\n      containerClass.add('hidden');\r\n    }\r\n\r\n    forEach(items.children, (entry) => {\r\n      const html = entry.html || (\r\n        entry.separator\r\n          ? '<hr class=\"separator\" />'\r\n          : '<div class=\"entry\" draggable=\"true\"></div>');\r\n\r\n      const control = domify(html);\r\n      const icon = domify(`<i class=\"content-icon ${entry.className}\"></i>`);\r\n      const label = domify(`<span class=\"content-label\">${entry.title}</span>`);\r\n      control.appendChild(icon);\r\n      control.appendChild(label);\r\n      content.appendChild(control);\r\n\r\n      if (!entry.separator) {\r\n        domAttr(control, 'data-action', entry.id);\r\n\r\n        if (entry.title) {\r\n          domAttr(control, 'title', entry.title);\r\n        }\r\n\r\n        if (entry.imageUrl) {\r\n          // console.log('control: ', control);\r\n          icon.appendChild(domify(`<img src=\"${entry.imageUrl}\">`));\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  // open after update\r\n  this.open();\r\n};\r\n\r\n\r\n/**\r\n * Trigger an action available on the palette\r\n *\r\n * @param  {String} action\r\n * @param  {Event} event\r\n */\r\nPalette.prototype.trigger = function (action, event, autoActivate) {\r\n  const entries = this._entries;\r\n  let entry;\r\n  const button = event.delegateTarget || event.target;\r\n\r\n  if (!button) {\r\n    return event.preventDefault();\r\n  }\r\n\r\n  forEach(entries, (items) => {\r\n    forEach(items.children, (item) => {\r\n      if (item.id === domAttr(button, 'data-action')) {\r\n        entry = item;\r\n      }\r\n    });\r\n  });\r\n\r\n  // when user clicks on the palette and not on an action\r\n  if (!entry) {\r\n    return;\r\n  }\r\n\r\n  const handler = entry.action;\r\n  const originalEvent = event.originalEvent || event;\r\n\r\n  // simple action (via callback function)\r\n  if (isFunction(handler)) {\r\n    if (action === 'click') {\r\n      handler(originalEvent, autoActivate);\r\n    }\r\n  } else if (handler[action]) {\r\n    handler[action](originalEvent, autoActivate);\r\n  }\r\n\r\n  // silence other actions\r\n  event.preventDefault();\r\n};\r\n\r\nPalette.prototype._layoutChanged = function () {\r\n  this._toggleState({});\r\n};\r\n\r\n/**\r\n * Do we need to collapse to two columns?\r\n *\r\n * @param {Number} availableHeight\r\n * @param {Object} entries\r\n *\r\n * @return {Boolean}\r\n */\r\nPalette.prototype._needsCollapse = (availableHeight, entries) => {\r\n  // top margin + bottom toggle + bottom margin\r\n  // implementors must override this method if they\r\n  // change the palette styles\r\n  const margin = 20 + 10 + 20;\r\n\r\n  const entriesHeight = Object.keys(entries).length * 46;\r\n\r\n  return availableHeight < entriesHeight + margin;\r\n};\r\n\r\n/**\r\n * Close the palette\r\n */\r\nPalette.prototype.close = function () {\r\n  this._toggleState({\r\n    open: false,\r\n    twoColumn: false\r\n  });\r\n};\r\n\r\n\r\n/**\r\n * Open the palette\r\n */\r\nPalette.prototype.open = function () {\r\n  this._toggleState({ open: true });\r\n};\r\n\r\n// 伸缩菜单\r\nPalette.prototype.toggle = (target) => {\r\n  const group = domClosest(target, '.group');\r\n  const content = domQuery('.djs-collapse-content', group);\r\n  const contentClasses = domClasses(content);\r\n  const headerClasses = domClasses(target);\r\n  const isOpen = contentClasses.has('open');\r\n  if (isOpen) {\r\n    contentClasses.remove('open');\r\n    headerClasses.remove('open');\r\n  } else {\r\n    contentClasses.add('open');\r\n    headerClasses.add('open');\r\n  }\r\n};\r\n\r\n// 伸缩左侧栏\r\nPalette.prototype.slide = function (target) {\r\n  const containerClasses = domClasses(this._container);\r\n  const isRetract = containerClasses.has('retract');\r\n  if (isRetract) {\r\n    containerClasses.remove('retract');\r\n    target.setAttribute('title', '收起');\r\n  } else {\r\n    containerClasses.add('retract');\r\n    target.setAttribute('title', '展开');\r\n  }\r\n};\r\n\r\nPalette.prototype.isActiveTool = (tool) => {\r\n  return tool && this._activeTool === tool;\r\n};\r\n\r\nPalette.prototype.updateToolHighlight = function (name) {\r\n  let entriesContainer;\r\n\r\n  if (!this._toolsContainer) {\r\n    entriesContainer = domQuery('.djs-palette-entries', this._container);\r\n    this._toolsContainer = domQuery('[data-group=tools]', entriesContainer);\r\n  }\r\n  const toolsContainer = this._toolsContainer;\r\n  // console.log('toolsContainer: ', toolsContainer);\r\n  // console.log('this: ', this);\r\n\r\n  forEach(toolsContainer.children, (tool) => {\r\n    let actionName = tool.getAttribute('data-action');\r\n\r\n    if (!actionName) {\r\n      return;\r\n    }\r\n\r\n    const toolClasses = domClasses(tool);\r\n\r\n    actionName = actionName.replace('-tool', '');\r\n\r\n    if (toolClasses.contains('entry') && actionName === name) {\r\n      toolClasses.add('highlighted-entry');\r\n    } else {\r\n      toolClasses.remove('highlighted-entry');\r\n    }\r\n  });\r\n};\r\n\r\n\r\n/**\r\n * Return true if the palette is opened.\r\n *\r\n * @example\r\n *\r\n * palette.open();\r\n *\r\n * if (palette.isOpen()) {\r\n *   // yes, we are open\r\n * }\r\n *\r\n * @return {boolean} true if palette is opened\r\n */\r\nPalette.prototype.isOpen = function () {\r\n  return domClasses(this._container).has(PALETTE_OPEN_CLS);\r\n};\r\n\r\n/**\r\n * Get container the palette lives in.\r\n *\r\n * @return {Element}\r\n */\r\nPalette.prototype._getParentContainer = function () {\r\n  return this._canvas.getContainer();\r\n};\r\n\r\n\r\n/* markup definition */\r\n\r\nPalette.HTML_MARKUP = `<div class=\"djs-palette\">\r\n    <div class=\"djs-palette-entries\"></div>\r\n    <div class=\"djs-palette-toggle iconfont\" title=\"收起\"></div>\r\n  </div>`;\r\n\r\n\r\n// helpers //////////////////////\r\n\r\n// function addClasses(element, classNames) {\r\n//   const classes = domClasses(element);\r\n\r\n//   const actualClassNames = isArray(classNames) ? classNames : classNames.split(/\\s+/g);\r\n//   actualClassNames.forEach((cls) => {\r\n//     classes.add(cls);\r\n//   });\r\n// }\r\n","import Palette from './Palette';\r\n\r\nexport default {\r\n  __init__: ['palette'],\r\n  palette: ['type', Palette]\r\n};\r\n","import { assign } from 'min-dash';\r\n\r\n/**\r\n * A palette that allows you to create BPMN _and_ custom elements.\r\n */\r\nexport default class CustomPalette {\r\n  constructor(\r\n    palette, create, elementFactory, spaceTool,\r\n    lassoTool, handTool, globalConnect, translate\r\n  ) {\r\n    this.create = create;\r\n    this.elementFactory = elementFactory;\r\n    this.spaceTool = spaceTool;\r\n    this.lassoTool = lassoTool;\r\n    this.handTool = handTool;\r\n    this.globalConnect = globalConnect;\r\n    this.translate = translate;\r\n    palette.registerProvider(this);\r\n  }\r\n\r\n  getPaletteEntries = () => {\r\n    const actions = [];\r\n    const {\r\n      create,\r\n      elementFactory,\r\n      translate,\r\n      spaceTool,\r\n      lassoTool,\r\n      handTool,\r\n      globalConnect,\r\n    } = this;\r\n\r\n    // 获取定制任务json\r\n    const customJson = window.customData;\r\n    function createAction(type, group, className, title, options, customType) {\r\n      function createListener(event) {\r\n        const shape = elementFactory.createShape(assign({ type }, options, { customType }));\r\n\r\n        if (options) {\r\n          shape.businessObject.di.isExpanded = options.isExpanded;\r\n        }\r\n\r\n        create.start(event, shape);\r\n      }\r\n\r\n      const shortType = type.replace(/^bpmn:/, '');\r\n      const action = {\r\n        group,\r\n        className,\r\n        title: (title && translate(title)) || translate(`Create ${shortType}`),\r\n        action: {\r\n          dragstart: createListener,\r\n          click: createListener\r\n        }\r\n      };\r\n\r\n      if (customType) {\r\n        // console.log(options);\r\n        customJson.forEach((item) => {\r\n          if (item.customType === customType) {\r\n            action.imageUrl = options.imageUrl;\r\n          }\r\n        });\r\n      }\r\n      return action;\r\n    }\r\n\r\n    function createParticipant(event, collapsed) {\r\n      create.start(event, elementFactory.createParticipantShape(collapsed));\r\n    }\r\n\r\n    assign(actions, [\r\n      {\r\n        title: translate('Tools'),\r\n        group: 'tools',\r\n        children: [\r\n          {\r\n            id: 'hand-tool',\r\n            group: 'tools',\r\n            className: 'bpmn-icon-hand-tool',\r\n            title: translate('Activate the hand tool'),\r\n            action: {\r\n              click: (event) => {\r\n                handTool.activateHand(event);\r\n              }\r\n            }\r\n          },\r\n          {\r\n            id: 'lasso-tool',\r\n            group: 'tools',\r\n            className: 'bpmn-icon-lasso-tool',\r\n            title: translate('Activate the lasso tool'),\r\n            action: {\r\n              click: (event) => {\r\n                lassoTool.activateSelection(event);\r\n              }\r\n            }\r\n          },\r\n          {\r\n            id: 'space-tool',\r\n            group: 'tools',\r\n            className: 'bpmn-icon-space-tool',\r\n            title: translate('Activate the create/remove space tool'),\r\n            action: {\r\n              click: (event) => {\r\n                spaceTool.activateSelection(event);\r\n              }\r\n            }\r\n          },\r\n          {\r\n            id: 'global-connect-tool',\r\n            group: 'tools',\r\n            className: 'bpmn-icon-connection-multi',\r\n            title: translate('Activate the global connect tool'),\r\n            action: {\r\n              click: (event) => {\r\n                globalConnect.toggle(event);\r\n              }\r\n            }\r\n          },\r\n        ]\r\n      },\r\n      {\r\n        title: translate('ProcessControl'),\r\n        group: 'processControl',\r\n        children: [\r\n          {\r\n            id: 'create.start-event',\r\n            ...createAction('bpmn:StartEvent', 'event', 'bpmn-icon-start-event-none')\r\n          },\r\n          {\r\n            id: 'create.intermediate-event',\r\n            ...createAction('bpmn:IntermediateThrowEvent', 'event', 'bpmn-icon-intermediate-event-none')\r\n          },\r\n          {\r\n            id: 'create.end-event',\r\n            ...createAction('bpmn:EndEvent', 'event', 'bpmn-icon-end-event-none')\r\n          },\r\n          {\r\n            id: 'create.exclusive-gateway',\r\n            ...createAction('bpmn:ExclusiveGateway', 'gateway', 'bpmn-icon-gateway-xor')\r\n          },\r\n          {\r\n            id: 'create.parallel-gateway',\r\n            ...createAction('bpmn:ParallelGateway', 'gateway', 'bpmn-icon-gateway-parallel')\r\n          },\r\n          {\r\n            id: 'create.task',\r\n            ...createAction('bpmn:Task', 'activity', 'bpmn-icon-task')\r\n          },\r\n          {\r\n            id: 'create.subprocess-expanded',\r\n            ...createAction('bpmn:SubProcess', 'activity', 'bpmn-icon-subprocess-expanded', 'Create expanded SubProcess', { isExpanded: true }),\r\n          },\r\n          {\r\n            id: 'create.participant-expanded',\r\n            group: 'collaboration',\r\n            className: 'bpmn-icon-participant',\r\n            title: translate('Create Pool/Participant'),\r\n            action: {\r\n              dragstart: createParticipant,\r\n              click: createParticipant\r\n            }\r\n          },\r\n        ]\r\n      }\r\n    ]);\r\n\r\n    // 定制任务\r\n    const children = [];\r\n    if (customJson.length) {\r\n      customJson.forEach((item) => {\r\n        const { customType } = item;\r\n        children.push(\r\n          {\r\n            id: `create.service-task-${customType}`,\r\n            ...createAction(\r\n              'bpmn:ServiceTask', 'custom', `bpmn-icon-${customType}`,\r\n              `Create ${customType}`, { imageUrl: item.imgDataUrl }, customType\r\n            ),\r\n          }\r\n        );\r\n      });\r\n    }\r\n    actions.push(\r\n      {\r\n        title: translate('CustomTasks'),\r\n        group: 'customTasks',\r\n        children\r\n      }\r\n    );\r\n    // console.log('actions: ', actions);\r\n    return actions;\r\n  };\r\n}\r\n\r\nCustomPalette.$inject = [\r\n  'palette',\r\n  'create',\r\n  'elementFactory',\r\n  'spaceTool',\r\n  'lassoTool',\r\n  'handTool',\r\n  'globalConnect',\r\n  'translate'\r\n];\r\n\r\n// export default function PaletteProvider(\r\n//   palette, create, elementFactory, spaceTool, lassoTool, handTool, globalConnect, translate\r\n// ) {\r\n//   this.create = create;\r\n//   this.elementFactory = elementFactory;\r\n//   this.spaceTool = spaceTool;\r\n//   this.lassoTool = lassoTool;\r\n//   this.handTool = handTool;\r\n//   this.globalConnect = globalConnect;\r\n//   this.translate = translate;\r\n//   palette.registerProvider(this);\r\n// }\r\n\r\n// PaletteProvider.$inject = [\r\n//   'palette',\r\n//   'create',\r\n//   'elementFactory',\r\n//   'spaceTool',\r\n//   'lassoTool',\r\n//   'handTool',\r\n//   'globalConnect',\r\n//   'translate'\r\n// ];\r\n\r\n// PaletteProvider.prototype.getPaletteEntries = function () {\r\n//   const actions = [];\r\n//   const {\r\n//     create,\r\n//     elementFactory,\r\n//     translate,\r\n//     spaceTool,\r\n//     lassoTool,\r\n//     handTool,\r\n//     globalConnect,\r\n//   } = this;\r\n//   // 获取定制任务json\r\n//   const customJson = window.customData;\r\n//   function createAction(type, group, className, title, options, customType) {\r\n//     function createListener(event) {\r\n//       const shape = elementFactory.createShape(assign({ type }, options, { customType }));\r\n\r\n//       if (options) {\r\n//         shape.businessObject.di.isExpanded = options.isExpanded;\r\n//       }\r\n\r\n//       create.start(event, shape);\r\n//     }\r\n\r\n//     const shortType = type.replace(/^bpmn:/, '');\r\n//     const action = {\r\n//       group,\r\n//       className,\r\n//       title: (title && translate(title)) || translate(`Create ${shortType}`),\r\n//       action: {\r\n//         dragstart: createListener,\r\n//         click: createListener\r\n//       }\r\n//     };\r\n\r\n//     if (customType) {\r\n//       // console.log(options);\r\n//       customJson.forEach((item) => {\r\n//         if (item.customType === customType) {\r\n//           action.imageUrl = options.imageUrl;\r\n//         }\r\n//       });\r\n//     }\r\n//     return action;\r\n//   }\r\n\r\n//   function createParticipant(event, collapsed) {\r\n//     create.start(event, elementFactory.createParticipantShape(collapsed));\r\n//   }\r\n\r\n//   assign(actions, [\r\n//     {\r\n//       title: translate('Tools'),\r\n//       group: 'tools',\r\n//       children: [\r\n//         {\r\n//           id: 'hand-tool',\r\n//           group: 'tools',\r\n//           className: 'bpmn-icon-hand-tool',\r\n//           title: translate('Activate the hand tool'),\r\n//           action: {\r\n//             click: (event) => {\r\n//               handTool.activateHand(event);\r\n//             }\r\n//           }\r\n//         },\r\n//         {\r\n//           id: 'lasso-tool',\r\n//           group: 'tools',\r\n//           className: 'bpmn-icon-lasso-tool',\r\n//           title: translate('Activate the lasso tool'),\r\n//           action: {\r\n//             click: (event) => {\r\n//               lassoTool.activateSelection(event);\r\n//             }\r\n//           }\r\n//         },\r\n//         {\r\n//           id: 'space-tool',\r\n//           group: 'tools',\r\n//           className: 'bpmn-icon-space-tool',\r\n//           title: translate('Activate the create/remove space tool'),\r\n//           action: {\r\n//             click: (event) => {\r\n//               spaceTool.activateSelection(event);\r\n//             }\r\n//           }\r\n//         },\r\n//         {\r\n//           id: 'global-connect-tool',\r\n//           group: 'tools',\r\n//           className: 'bpmn-icon-connection-multi',\r\n//           title: translate('Activate the global connect tool'),\r\n//           action: {\r\n//             click: (event) => {\r\n//               globalConnect.toggle(event);\r\n//             }\r\n//           }\r\n//         },\r\n//       ]\r\n//     },\r\n//     {\r\n//       title: translate('ProcessControl'),\r\n//       group: 'processControl',\r\n//       children: [\r\n//         {\r\n//           id: 'create.start-event',\r\n//           ...createAction('bpmn:StartEvent', 'event', 'bpmn-icon-start-event-none')\r\n//         },\r\n//         {\r\n//           id: 'create.intermediate-event',\r\n//           ...createAction('bpmn:IntermediateThrowEvent', 'event'\r\n// , 'bpmn-icon-intermediate-event-none')\r\n//         },\r\n//         {\r\n//           id: 'create.end-event',\r\n//           ...createAction('bpmn:EndEvent', 'event', 'bpmn-icon-end-event-none')\r\n//         },\r\n//         {\r\n//           id: 'create.exclusive-gateway',\r\n//           ...createAction('bpmn:ExclusiveGateway', 'gateway', 'bpmn-icon-gateway-xor')\r\n//         },\r\n//         {\r\n//           id: 'create.parallel-gateway',\r\n//           ...createAction('bpmn:ParallelGateway', 'gateway', 'bpmn-icon-gateway-parallel')\r\n//         },\r\n//         {\r\n//           id: 'create.task',\r\n//           ...createAction('bpmn:Task', 'activity', 'bpmn-icon-task')\r\n//         },\r\n//         {\r\n//           id: 'create.subprocess-expanded',\r\n//           ...createAction('bpmn:SubProcess', 'activity', 'bpmn-icon-subprocess-expanded'\r\n// , 'Create expanded SubProcess', { isExpanded: true }),\r\n//         },\r\n//         {\r\n//           id: 'create.participant-expanded',\r\n//           group: 'collaboration',\r\n//           className: 'bpmn-icon-participant',\r\n//           title: translate('Create Pool/Participant'),\r\n//           action: {\r\n//             dragstart: createParticipant,\r\n//             click: createParticipant\r\n//           }\r\n//         },\r\n//       ]\r\n//     }\r\n//   ]);\r\n\r\n//   // 定制任务\r\n//   const children = [];\r\n//   if (customJson.length) {\r\n//     customJson.forEach((item) => {\r\n//       const { customType } = item;\r\n//       children.push(\r\n//         {\r\n//           id: `create.service-task-${customType}`,\r\n//           ...createAction(\r\n//             'bpmn:ServiceTask', 'custom', `bpmn-icon-${customType}`,\r\n//             `Create ${customType}`, { imageUrl: item.imgDataUrl }, customType\r\n//           ),\r\n//         }\r\n//       );\r\n//     });\r\n//   }\r\n//   actions.push(\r\n//     {\r\n//       title: translate('CustomTasks'),\r\n//       group: 'customTasks',\r\n//       children\r\n//     }\r\n//   );\r\n//   // console.log('actions: ', actions);\r\n//   return actions;\r\n// };\r\n","import inherits from 'inherits';\r\nimport ContextPadProvider from 'bpmn-js/lib/features/context-pad/ContextPadProvider';\r\nimport { bind } from 'min-dash';\r\n\r\nexport default function CustomContextPadProvider(injector) {\r\n  injector.invoke(ContextPadProvider, this);\r\n  const cached = bind(this.getContextPadEntries, this);\r\n  this.getContextPadEntries = (element) => {\r\n    const actions = cached(element);\r\n    // 获取定制任务json\r\n    const customJson = window.customData;\r\n    if (customJson.length) {\r\n      // 定制化-删除编辑替换\r\n      customJson.forEach((item) => {\r\n        if (\r\n          element.customType === item.customType\r\n          || (\r\n            element.businessObject.name\r\n            && element.businessObject.name === item.initProperties.name\r\n          )\r\n        ) {\r\n          delete actions.replace;\r\n        }\r\n      });\r\n    }\r\n\r\n    return actions;\r\n  };\r\n}\r\n\r\ninherits(CustomContextPadProvider, ContextPadProvider);\r\n\r\nCustomContextPadProvider.$inject = [\r\n  'injector',\r\n];\r\n","import inherits from 'inherits';\r\nimport BaseRenderer from 'diagram-js/lib/draw/BaseRenderer';\r\nimport { append as svgAppend, create as svgCreate } from 'tiny-svg';\r\n\r\nexport default function CustomRenderer(eventBus) {\r\n  BaseRenderer.call(this, eventBus, 1500);\r\n  // 获取定制任务json\r\n  const customJson = window.customData;\r\n  // 当前拖拽任务节点为定制任务节点，则可渲染该节点\r\n  this.canRender = (element) => {\r\n    const bo = element.businessObject;\r\n    if (bo) {\r\n      const customShapeData = customJson.filter(\r\n        item => item.customType === element.customType\r\n        || (bo.name && bo.name === item.initProperties.name)\r\n      )[0];\r\n      if (customShapeData) {\r\n        return true;\r\n      }\r\n    }\r\n  };\r\n\r\n  // 在canvas中渲染当前定制节点\r\n  this.drawShape = (parent, shape) => {\r\n    const bo = shape.businessObject;\r\n    let href = '';\r\n    if (bo) {\r\n      const customShapeData = customJson.filter(\r\n        item => item.customType === shape.customType\r\n        || (bo.name && bo.name === item.initProperties.name)\r\n      )[0];\r\n      if (customShapeData) {\r\n        href = customShapeData.imgDataUrl;\r\n      }\r\n    }\r\n\r\n    const customGfx = svgCreate('image', {\r\n      x: 0,\r\n      y: 0,\r\n      width: shape.width,\r\n      height: shape.height,\r\n      href\r\n    });\r\n\r\n\r\n    svgAppend(parent, customGfx);\r\n\r\n    return customGfx;\r\n  };\r\n}\r\n\r\ninherits(CustomRenderer, BaseRenderer);\r\n\r\nCustomRenderer.$inject = ['eventBus'];\r\n","/*\r\n * @Author: Snoopy\r\n * @功能：自定义左侧面板\r\n */\r\nimport PaletteModule from './palette';\r\nimport CustomPalette from './CustomPalette';\r\nimport CustomContextPadProvider from './CustomContextPadProvider';\r\nimport CustomRenderer from './CustomRenderer';\r\n\r\nexport default {\r\n  __depends__: [\r\n    PaletteModule\r\n  ],\r\n  __init__: [\r\n    'contextPadProvider',\r\n    'customRenderer',\r\n    'paletteProvider'\r\n  ],\r\n  contextPadProvider: ['type', CustomContextPadProvider],\r\n  customRenderer: ['type', CustomRenderer],\r\n  paletteProvider: ['type', CustomPalette]\r\n};\r\n","/**\r\n * BPMN 2.0 specific key bindings.\r\n *\r\n * @param {Keyboard} keyboard\r\n * @param {EditorActions} editorActions\r\n */\r\nexport default function BpmnKeyBindings(keyboard, editorActions) {\r\n  keyboard.addListener((key) => {\r\n    // 监听剪切操作\r\n    if (key === 88) {\r\n      editorActions.trigger('copy');\r\n      editorActions.trigger('removeSelection');\r\n      return true;\r\n    }\r\n  });\r\n}\r\n\r\nBpmnKeyBindings.$inject = [\r\n  'keyboard',\r\n  'editorActions'\r\n];\r\n","/*\r\n * @Author: Snoopy\r\n * @ 功能：支持键盘常用操作\r\n */\r\n\r\nimport KeyboardModule from 'diagram-js/lib/features/keyboard';\r\n\r\nimport BpmnKeyBindings from './BpmnKeyBindings';\r\n\r\nexport default {\r\n  __depends__: [\r\n    KeyboardModule\r\n  ],\r\n  __init__: ['bpmnKeyBindings'],\r\n  bpmnKeyBindings: ['type', BpmnKeyBindings]\r\n};\r\n","/* eslint-disable */\r\nexport default {\r\n\r\n  // Labels\r\n  'Activate the global connect tool': '激活全局连接',\r\n  'Append {type}': '添加 {type}',\r\n  'Add Lane above': '在上面添加道',\r\n  'Divide into two Lanes': '分割成两个道',\r\n  'Divide into three Lanes': '分割成三个道',\r\n  'Add Lane below': '在下面添加道',\r\n  'Append compensation activity': '追加补偿活动',\r\n  'Change type': '修改类型',\r\n  'Connect using Association': '使用关联连接',\r\n  'Connect using Sequence/MessageFlow or Association': '使用顺序/消息流或者关联连接',\r\n  'Connect using DataInputAssociation': '使用数据输入关联连接',\r\n  'Remove': '移除',\r\n  'Tools': '工具',\r\n  'Activate the hand tool': '激活抓手',\r\n  'Activate the lasso tool': '激活套索',\r\n  'Activate the create/remove space tool': '激活创建/删除空间',\r\n  'Create expanded SubProcess': '扩展子过程',\r\n  'Create IntermediateThrowEvent/BoundaryEvent': '创建中间抛出事件/边界事件',\r\n  'Create Pool/Participant': '池/参与者',\r\n  'Parallel Multi Instance': '并行多重事件',\r\n  'Sequential Multi Instance': '时序多重事件',\r\n  'DataObjectReference': '数据对象参考',\r\n  'Data Reference': '数据参考',\r\n  'Create DataObjectReference': '数据对象参考',\r\n  'Create DataStoreReference': '数据存储参考',\r\n  'Loop': '循环',\r\n  'Ad-hoc': '即席',\r\n  'Create {type}': '创建 {type}',\r\n  'Task': '任务',\r\n  'Create Task': '任务',\r\n  'Send Task': '发送任务',\r\n  'Receive Task': '接收任务',\r\n  'User Task': '用户任务',\r\n  'Create UserTask': '创建用户任务',\r\n  'Manual Task': '手工任务',\r\n  'Business Rule Task': '业务规则任务',\r\n  'Service Task': '服务任务',\r\n  'Create ServiceTask': '创建服务任务',\r\n  'Script Task': '脚本任务',\r\n  'Call Activity': '调用活动',\r\n  'Sub Process (collapsed)': '子流程（折叠的）',\r\n  'Sub Process (expanded)': '子流程（展开的）',\r\n  'Events': '事件',\r\n  'Start Event': '开始事件',\r\n  'StartEvent': '开始事件',\r\n  'Create StartEvent': '开始事件',\r\n  'Intermediate Throw Event': '中间事件',\r\n  'Create IntermediateThrowEvent': '中间或边界事件',\r\n  'End Event': '结束事件',\r\n  'EndEvent': '结束事件',\r\n  'Create EndEvent': '结束事件',\r\n  'Create Intermediate/Boundary Event': '创建中间/边界事件',\r\n  'Append Intermediate/Boundary Event': '添加中间/边界事件',\r\n  'Boundary Event Timer': '边界事件定时器',\r\n  'Message Start Event': '消息开始事件',\r\n  'Timer Start Event': '定时开始事件',\r\n  'Conditional Start Event': '条件开始事件',\r\n  'Signal Start Event': '信号开始事件',\r\n  'Error Start Event': '错误开始事件',\r\n  'Escalation Start Event': '升级开始事件',\r\n  'Compensation Start Event': '补偿开始事件',\r\n  'Message Start Event (non-interrupting)': '消息开始事件（非中断）',\r\n  'Timer Start Event (non-interrupting)': '定时开始事件（非中断）',\r\n  'Conditional Start Event (non-interrupting)': '条件开始事件（非中断）',\r\n  'Signal Start Event (non-interrupting)': '信号开始事件（非中断）',\r\n  'Escalation Start Event (non-interrupting)': '升级开始事件（非中断）',\r\n  'Message Intermediate Catch Event': '消息中间捕获事件',\r\n  'Message Intermediate Throw Event': '消息中间抛出事件',\r\n  'Timer Intermediate Catch Event': '定时中间捕获事件',\r\n  'Escalation Intermediate Throw Event': '升级中间抛出事件',\r\n  'Conditional Intermediate Catch Event': '条件中间捕获事件',\r\n  'Link Intermediate Catch Event': '链接中间捕获事件',\r\n  'Link Intermediate Throw Event': '链接中间抛出事件',\r\n  'Compensation Intermediate Throw Event': '补偿中间抛出事件',\r\n  'Signal Intermediate Catch Event': '信号中间捕获事件',\r\n  'Signal Intermediate Throw Event': '信号中间抛出事件',\r\n  'Intermediate Event Catch Timer': '中间事件捕获时间',\r\n  'Message End Event': '消息结束事件',\r\n  'Escalation End Event': '定时结束事件',\r\n  'Error End Event': '错误结束事件',\r\n  'Cancel End Event': '取消结束事件',\r\n  'Compensation End Event': '补偿结束事件',\r\n  'Signal End Event': '信号结束事件',\r\n  'Terminate End Event': '终止结束事件',\r\n  'Message Boundary Event': '消息边界事件',\r\n  'Message Boundary Event (non-interrupting)': '消息边界事件（非中断）',\r\n  'Timer Boundary Event': '定时边界事件',\r\n  'Timer Boundary Event (non-interrupting)': '定时边界事件（非中断）',\r\n  'Escalation Boundary Event': '升级边界事件',\r\n  'Escalation Boundary Event (non-interrupting)': '升级边界事件（非中断）',\r\n  'Conditional Boundary Event': '条件边界事件',\r\n  'Conditional Boundary Event (non-interrupting)': '条件边界事件（非中断）',\r\n  'Error Boundary Event': '错误边界事件',\r\n  'Cancel Boundary Event': '取消边界事件',\r\n  'Signal Boundary Event': '信号边界事件',\r\n  'Signal Boundary Event (non-interrupting)': '信号边界事件（非中断）',\r\n  'Compensation Boundary Event': '补偿边界事件',\r\n  'Gateways': '网关',\r\n  'Create Gateway': '创建网关',\r\n  'Append Gateway': '添加网关',\r\n  'Exclusive Gateway': '互斥网关',\r\n  'Create ExclusiveGateway': '互斥网关',\r\n  'Parallel Gateway': '并行网关',\r\n  'Create ParallelGateway': '并行网关',\r\n  'Inclusive Gateway': '相容网关',\r\n  'Complex Gateway': '复杂网关',\r\n  'Event based Gateway': '事件网关',\r\n  'Transaction': '转运',\r\n  'Sub Process': '子流程',\r\n  'Event Sub Process': '事件子流程',\r\n  'Collapsed Pool': '折叠池',\r\n  'Expanded Pool': '展开池',\r\n  'TextAnnotation': '文本注解',\r\n\r\n  'Create custom:triangle': '创建三角',\r\n  'Create custom:circle': '创建圆',\r\n\r\n  // Errors\r\n  'no parent for {element} in {parent}': '在{parent}里，{element}没有父类',\r\n  'no shape type specified': '没有指定的形状类型',\r\n  'flow elements must be children of pools/participants': '流元素必须是池/参与者的子类',\r\n  'out of bounds release': 'out of bounds release',\r\n  'more than {count} child lanes': '子道大于{count} ',\r\n  'element required': '元素不能为空',\r\n  'diagram not part of bpmn:Definitions': '流程图不符合bpmn规范',\r\n  'no diagram to display': '没有可展示的流程图',\r\n  'no process or collaboration to display': '没有可展示的流程/协作',\r\n  'element {element} referenced by {referenced}#{property} not yet drawn': '由{referenced}#{property}引用的{element}元素仍未绘制',\r\n  'already rendered {element}': '{element} 已被渲染',\r\n  'failed to import {element}': '导入{element}失败',\r\n  \r\n  //属性面板的参数\r\n  'Id': '编号',\r\n  'Name': '名称',\r\n  'General': '常规',\r\n  'Details': '详情',\r\n  'Message Name': '消息名称',\r\n  'Message': '消息',\r\n  'Initiator': '创建者',\r\n  'Asynchronous Continuations': '持续异步',\r\n  'Asynchronous Before': '异步前',\r\n  'Asynchronous After': '异步后',\r\n  'Job Configuration': '工作配置',\r\n  'Exclusive': '排除',\r\n  'Job Priority': '工作优先级',\r\n  'Retry Time Cycle': '重试时间周期',\r\n  'Documentation': '文档',\r\n  'Element Documentation': '元素文档（节点分组）',\r\n  'History Configuration': '历史配置',\r\n  'History Time To Live': '历史的生存时间',\r\n  'Forms': '表单',\r\n  'Form Key': '表单key',\r\n  'Form Fields': '表单字段',\r\n  'Business Key': '业务key',\r\n  'Form Field': '表单字段',\r\n  'ID': '编号',\r\n  'Type': '类型',\r\n  'Label': '名称',\r\n  'Default Value': '默认值',\r\n  'Validation': '校验',\r\n  'Add Constraint': '添加约束',\r\n  'Config': '配置',\r\n  'Properties': '属性',\r\n  'Add Property': '添加属性',\r\n  'Value': '值',\r\n  'Listeners': '监听器',\r\n  'Execution Listener': '执行监听',\r\n  'Event Type': '事件类型',\r\n  'Listener Type': '监听器类型',\r\n  'Java Class': 'Java类',\r\n  'Expression': '表达式',\r\n  'Must provide a value': '必须提供一个值',\r\n  'Parameter must have a name': '必须提供一个字段名称',\r\n  'Delegate Expression': '代理表达式',\r\n  'Script': '脚本',\r\n  'Script Format': '脚本格式',\r\n  'Script Type': '脚本类型',\r\n  'Inline Script': '内联脚本',\r\n  'External Script': '外部脚本',\r\n  'Resource': '资源',\r\n  'Field Injection': '字段注入',\r\n  'Extensions': '扩展',\r\n  'Input/Output': '输入/输出',\r\n  'Input Parameters': '输入参数',\r\n  'Output Parameters': '输出参数',\r\n  'Parameters': '参数',\r\n  'Output Parameter': '输出参数',\r\n  'Timer Definition Type': '定时器定义类型',\r\n  'Timer Definition': '定时器定义',\r\n  'Date': '日期',\r\n  'Duration': '持续',\r\n  'Cycle': '循环',\r\n  'Signal': '信号',\r\n  'Signal Name': '信号名称',\r\n  'Escalation': '升级',\r\n  'Error': '错误',\r\n  'Link Name': '链接名称',\r\n  'Condition': '条件名称',\r\n  'Variable Name': '变量名称',\r\n  'Variable Event': '变量事件',\r\n  'Specify more than one variable change event as a comma separated list.': '多个变量事件以逗号隔开',\r\n  'Wait for Completion': '等待完成',\r\n  'Activity Ref': '活动参考',\r\n  'Version Tag': '版本标签',\r\n  'Executable': '可执行文件',\r\n  'External Task Configuration': '扩展任务配置',\r\n  'Task Priority': '任务优先级',\r\n  'External': '外部',\r\n  'Connector': '连接器',\r\n  'Must configure Connector': '必须配置连接器',\r\n  'Connector Id': '连接器编号',\r\n  'Implementation': '实现方式',\r\n  'Field Injections': '字段注入',\r\n  'Fields': '字段',\r\n  'Result Variable': '结果变量',\r\n  'Topic': '主题',\r\n  'Configure Connector': '配置连接器',\r\n  'Input Parameter': '输入参数',\r\n  'Assignee': '代理人',\r\n  'Candidate Users': '候选用户',\r\n  'Candidate Groups': '候选组',\r\n  'Due Date': '到期时间',\r\n  'Follow Up Date': '跟踪日期',\r\n  'Priority': '优先级',\r\n  'The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)': '跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00',\r\n  'The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)': '跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00',\r\n  'Variables': '变量',\r\n\r\n  'Open minimap': '打开预览',\r\n  'Close minimap': '关闭预览',\r\n\r\n  'ProcessControl': '流程控制',\r\n\r\n  // customTasks\r\n  'CustomTasks': '自定义任务',\r\n  'Create CustomTaskDemo': '自定义任务',\r\n  'Add Custom Tasks': '自定义定制任务',\r\n  'Create CustomTask': '自定义任务',\r\n\r\n  // v0.30.0常规新增\r\n  'This maps to the process definition key.': ' ',\r\n  'Candidate Starter Configuration': '候选初学者配置',\r\n  'Candidate Starter Groups': '候选初学者组',\r\n  'Specify more than one group as a comma separated list.': '指定多个组作为逗号分隔列表。',\r\n  'Candidate Starter Users': '候选初学者用户',\r\n  'Specify more than one user as a comma separated list.': '指定多个用户作为逗号分隔列表。',\r\n  'Tasklist Configuration': '任务列表配置',\r\n  'Startable': '可启动',\r\n  \r\n\r\n};","/*\r\n * @Author: Snoopy\r\n * @ 功能：自定义语言（i18n）\r\n */\r\n\r\nimport CustomTranslate from './customTranslate';\r\n\r\nexport default {\r\n  __init__: ['translate'],\r\n  translate: ['value', CustomTranslate]\r\n};\r\n","import translations from './translationsGerman';\r\n\r\nexport default function customTranslate(template, replacements) {\r\n  replacements = replacements || {};\r\n\r\n  // 翻译\r\n  template = translations[template] || template;\r\n\r\n  // 替换\r\n  return template.replace(/{([^}]+)}/g, (_, key) => {\r\n    let str = replacements[key];\r\n    if (translations[replacements[key]] != null && translations[replacements[key]] !== 'undefined') {\r\n      str = translations[replacements[key]];\r\n    }\r\n    return str || `{${key}}`;\r\n  });\r\n}\r\n","import RuleProvider from 'diagram-js/lib/features/rules/RuleProvider';\r\n\r\nimport inherits from 'inherits';\r\n\r\nconst HIGH_PRIORITY = 1500;\r\n\r\nexport default function ResizeAllRules(eventBus) {\r\n  RuleProvider.call(this, eventBus);\r\n}\r\n\r\ninherits(ResizeAllRules, RuleProvider);\r\n\r\nResizeAllRules.$inject = ['eventBus'];\r\n\r\nResizeAllRules.prototype.init = function () {\r\n  this.addRule('shape.resize', HIGH_PRIORITY, (context) => {\r\n    const { shape } = context;\r\n    // 支持调整大小（非流程连接线）\r\n    if (shape.type === 'bpmn:SequenceFlow') {\r\n      // cannot resize custom elements\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  });\r\n};\r\n","/*\r\n * @Author: Snoopy\r\n * @ 功能：调整所有任务节点的大小\r\n */\r\n\r\nimport ResizeAllRules from './ResizeAllRules';\r\n\r\nexport default {\r\n  __init__: ['resizeAllRules'],\r\n  resizeAllRules: ['type', ResizeAllRules]\r\n};\r\n","import { is } from 'bpmn-js/lib/util/ModelUtil';\n/**\n * A handler updating an elements color.\n */\nfunction UpdateColorHandler() {\n  this.execute = (context) => {\n    context.oldColor = context.element.color;\n    context.element.color = context.color;\n\n    return context.element;\n  };\n\n  this.revert = (context) => {\n    context.element.color = context.oldColor;\n\n    return context.element;\n  };\n}\n\n/**\n * A basic color picker implementation.\n *\n * @param {EventBus} eventBus\n * @param {ContextPad} contextPad\n * @param {CommandStack} commandStack\n */\nexport default function ColorPicker(eventBus, contextPad, commandStack) {\n  contextPad.registerProvider(this);\n\n  commandStack.registerHandler('shape.updateColor', UpdateColorHandler);\n\n  function changeColor(event, element) {\n    const color = window.prompt('填入色值');\n    commandStack.execute('shape.updateColor', { element, color });\n  }\n\n  this.getContextPadEntries = (element) => {\n    if (is(element, 'bpmn:Event')) {\n      return {\n        changeColor: {\n          group: 'edit',\n          className: 'icon-red',\n          title: 'Change element color',\n          action: {\n            click: changeColor\n          }\n        }\n      };\n    }\n  };\n}\n","import inherits from 'inherits';\n\nimport {\n  attr as svgAttr\n} from 'tiny-svg';\n\nimport BpmnRenderer from 'bpmn-js/lib/draw/BpmnRenderer';\n\nimport {\n  is\n} from 'bpmn-js/lib/util/ModelUtil';\n\n\nexport default function ColoredRenderer(\n  config, eventBus, styles,\n  pathMap, canvas, textRenderer\n) {\n  BpmnRenderer.call(\n    this,\n    config, eventBus, styles,\n    pathMap, canvas, textRenderer,\n    1400\n  );\n\n  this.canRender = (element) => {\n    return is(element, 'bpmn:BaseElement') && element.color;\n  };\n\n  this.drawShape = (parent, shape) => {\n    const bpmnShape = this.drawBpmnShape(parent, shape);\n\n    svgAttr(bpmnShape, { fill: shape.color });\n\n    return bpmnShape;\n  };\n}\n\ninherits(ColoredRenderer, BpmnRenderer);\n\nColoredRenderer.prototype.drawBpmnShape = BpmnRenderer.prototype.drawShape;\n\n\nColoredRenderer.$inject = [\n  'config.bpmnRenderer',\n  'eventBus',\n  'styles',\n  'pathMap',\n  'canvas',\n  'textRenderer'\n];\n","import ColorPicker from './ColorPicker';\nimport ColoredRenderer from './ColoredRenderer';\n\nexport default {\n  __init__: ['colorPicker', 'coloredRenderer'],\n  colorPicker: ['type', ColorPicker],\n  coloredRenderer: ['type', ColoredRenderer]\n};\n","import { isObject } from 'min-dash';\r\n\r\n/**\r\n * Convert the given bounds to a { top, left, bottom, right } descriptor.\r\n *\r\n * @param {Bounds|Point} bounds\r\n *\r\n * @return {Object}\r\n */\r\nexport function asTRBL(bounds) {\r\n  return {\r\n    top: bounds.y,\r\n    right: bounds.x + (bounds.width || 0),\r\n    bottom: bounds.y + (bounds.height || 0),\r\n    left: bounds.x\r\n  };\r\n}\r\n\r\n\r\n// orientation utils //////////////////////////////\r\n\r\n/**\r\n * Get orientation of the given rectangle with respect to\r\n * the reference rectangle.\r\n *\r\n * A padding (positive or negative) may be passed to influence\r\n * horizontal / vertical orientation and intersection.\r\n *\r\n * @param {Bounds} rect\r\n * @param {Bounds} reference\r\n * @param {Point|Number} padding\r\n *\r\n * @return {String} the orientation; one of top, top-left, left, ..., bottom, right or intersect.\r\n */\r\nexport function getOrientation(rect, reference, padding) {\r\n  padding = padding || 0;\r\n\r\n  // make sure we can use an object, too\r\n  // for individual { x, y } padding\r\n  if (!isObject(padding)) {\r\n    padding = { x: padding, y: padding };\r\n  }\r\n\r\n\r\n  const rectOrientation = asTRBL(rect);\r\n  const referenceOrientation = asTRBL(reference);\r\n\r\n  const top = rectOrientation.bottom + padding.y <= referenceOrientation.top;\r\n  const right = rectOrientation.left - padding.x >= referenceOrientation.right;\r\n  const bottom = rectOrientation.top - padding.y >= referenceOrientation.bottom;\r\n  const left = rectOrientation.right + padding.x <= referenceOrientation.left;\r\n\r\n  const vertical = top ? 'top' : (bottom ? 'bottom' : null);\r\n  const horizontal = left ? 'left' : (right ? 'right' : null);\r\n\r\n  if (horizontal && vertical) {\r\n    return `${vertical}-${horizontal}`;\r\n  } else {\r\n    return horizontal || vertical || 'intersect';\r\n  }\r\n}\r\n","import {\r\n  forEach,\r\n  assign\r\n} from 'min-dash';\r\n\r\nimport { getOrientation } from './Util';\r\n\r\nexport default function TransactionBoundaries(elementRegistry, overlays, eventBus) {\r\n  this._overlays = overlays;\r\n  this._elementRegistry = elementRegistry;\r\n\r\n  this.active = false;\r\n\r\n  const self = this;\r\n\r\n  // 边界标注显示、隐藏\r\n  eventBus.on('elements.changed', () => {\r\n    if (self.active) {\r\n      self.hide();\r\n      self.show();\r\n    }\r\n  });\r\n}\r\n\r\nTransactionBoundaries.$inject = ['elementRegistry', 'overlays', 'eventBus'];\r\n\r\n\r\n/**\r\n * Get the transaction boundaries for the given element\r\n *\r\n * The following BPMN elements are always wait states\r\n * and have a boundary for incoming connections:\r\n *\r\n * - Intermediate Catching Message Event\r\n * - Intermediate Catching Timer Event\r\n * - Intermediate Catching Signal Event\r\n * - Intermediate Catching Conditional Event\r\n * - Receive Task\r\n * - User Task\r\n * - Event Based Gateway\r\n * - External Service Task\r\n *\r\n * Furthermore all activities which have asynchronous\r\n * continuations act as transaction boundaries. This\r\n * is also valid for multi-instance activities.\r\n *\r\n * Learn more about transactions and wait states:\r\n * https://docs.camunda.org/manual/latest/user-guide/process-engine/transactions-in-processes/\r\n *\r\n * @param  {djs.shape} element\r\n *\r\n * @return {object|undefined}  an object with boolean properties 'before' and 'after'\r\n *\r\n * @example:\r\n * A plain task with the camunda:asyncAfter extension attribute set\r\n * has a transaction boundary after itself. This will return the following:\r\n * { before: false, after: true }\r\n */\r\nTransactionBoundaries.prototype._getTransactionBoundaries = function (element) {\r\n  const { businessObject } = element;\r\n  const { loopCharacteristics, eventDefinitions } = businessObject;\r\n  const eventDefinitionType = eventDefinitions && businessObject.eventDefinitions[0].$type;\r\n\r\n  const isWaitStateTask = element.type === 'bpmn:ReceiveTask' || element.type === 'bpmn:UserTask'\r\n        || (element.type === 'bpmn:ServiceTask' && businessObject.type === 'external');\r\n\r\n  const isWaitStateGateway = element.type === 'bpmn:EventBasedGateway';\r\n\r\n  const isWaitStateEvent = element.type === 'bpmn:IntermediateCatchEvent' && (\r\n    eventDefinitionType === 'bpmn:MessageEventDefinition'\r\n    || eventDefinitionType === 'bpmn:TimerEventDefinition'\r\n    || eventDefinitionType === 'bpmn:SignalEventDefinition'\r\n    || eventDefinitionType === 'bpmn:ConditionalEventDefinition'\r\n  );\r\n\r\n  const isAsyncAfter = businessObject.asyncAfter\r\n    || (loopCharacteristics && loopCharacteristics.asyncAfter);\r\n\r\n  const isAsyncBefore = businessObject.asyncBefore\r\n    || (loopCharacteristics && loopCharacteristics.asyncBefore);\r\n\r\n  const boundariesBefore = isWaitStateTask\r\n    || isWaitStateEvent\r\n    || isWaitStateGateway\r\n    || isAsyncBefore;\r\n  const boundariesAfter = isAsyncAfter;\r\n\r\n  if (boundariesBefore || boundariesAfter) {\r\n    return { before: !!boundariesBefore, after: !!boundariesAfter };\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Get all elements which have a transaction boundary.\r\n *\r\n * @return {object}\r\n */\r\nTransactionBoundaries.prototype._getTransactionBoundaryElements = function () {\r\n  const transactionBoundaryElements = [];\r\n\r\n  const self = this;\r\n\r\n  this._elementRegistry.forEach((element) => {\r\n    if (element.type === 'label') {\r\n      return;\r\n    }\r\n\r\n    const transactionBoundaries = self._getTransactionBoundaries(element);\r\n\r\n    if (transactionBoundaries) {\r\n      transactionBoundaryElements.push(\r\n        assign({ shape: element }, { boundaries: transactionBoundaries })\r\n      );\r\n    }\r\n  });\r\n  return transactionBoundaryElements;\r\n};\r\n\r\n\r\n/**\r\n * Add a transaction boundary overlay on the shape at the correct trbl position.\r\n *\r\n * @param {djs.model.Shape} shape\r\n * @param {Point} waypoint\r\n */\r\nTransactionBoundaries.prototype._addOverlay = function (shape, waypoint) {\r\n  let orientation = getOrientation(waypoint, shape, -7);\r\n\r\n  if (orientation === 'intersect') {\r\n    // Try again using a bigger padding to get an orientation which is not 'intersect'.\r\n    // Otherwise the boundary would not be visible if the connection is attached on the\r\n    // diagonal edge of a gateway. Not perfect, but much better than showing no overlay at all.\r\n    orientation = getOrientation(waypoint, shape, -20);\r\n  }\r\n\r\n  const strokeWidth = 3;\r\n  const defaultLength = 20;\r\n  const margin = 0;\r\n\r\n  const position = {};\r\n  let height;\r\n  let width;\r\n\r\n  // if orientation is either 'left', 'top-left' or 'bottom-left'\r\n  if (/left/.test(orientation)) {\r\n    width = strokeWidth;\r\n    height = defaultLength;\r\n\r\n    // horizontal position: at the left border respecting margin\r\n    // vertical position: centered at the connection waypoint\r\n    position.left = -width - margin;\r\n    position.top = waypoint.y - shape.y - defaultLength / 2;\r\n\r\n  // if orientation is either 'right', 'top-right' or 'bottom-right'\r\n  } else if (/right/.test(orientation)) {\r\n    width = strokeWidth;\r\n    height = defaultLength;\r\n\r\n    // horizontal position: at the right border respecting margin\r\n    // vertical position: centered at the connection waypoint\r\n    position.right = shape.x + shape.width - waypoint.x - margin;\r\n    position.top = waypoint.y - shape.y - defaultLength / 2;\r\n  } else if (orientation === 'top') {\r\n    width = defaultLength;\r\n    height = strokeWidth;\r\n\r\n    // horizontal position: centered at the connection waypoint\r\n    // vertical position: at the top border respecting margin\r\n    position.left = waypoint.x - shape.x - defaultLength / 2;\r\n    position.top = -height - margin;\r\n  } else if (orientation === 'bottom') {\r\n    width = defaultLength;\r\n    height = strokeWidth;\r\n\r\n    // horizontal position: centered at the connection waypoint\r\n    // vertical position: at the bottom border respecting margin\r\n    position.bottom = -margin;\r\n    position.left = waypoint.x - shape.x - defaultLength / 2;\r\n  }\r\n\r\n  this._overlays.add(shape, 'transaction-boundaries', {\r\n    position,\r\n    html: `<div style=\"width: ${width}px; height: ${height}px; background: #ee0000; \"> </div>`\r\n  });\r\n};\r\n\r\n\r\n/**\r\n * Create overlays for all transaction boundaries.\r\n */\r\nTransactionBoundaries.prototype.show = function () {\r\n  const transactionBoundaryElements = this._getTransactionBoundaryElements();\r\n\r\n  const self = this;\r\n\r\n  forEach(transactionBoundaryElements, (element) => {\r\n    if (element.boundaries.before) {\r\n      if (element.shape.incoming.length > 0) {\r\n        forEach(element.shape.incoming, (connection) => {\r\n          if (connection.type !== 'bpmn:SequenceFlow') {\r\n            return;\r\n          }\r\n\r\n          // last waypoint of the incoming connection\r\n          const waypoint = connection.waypoints[connection.waypoints.length - 1];\r\n\r\n          self._addOverlay(element.shape, waypoint);\r\n        });\r\n      } else {\r\n        // no incoming connection, calculate position in the front\r\n        self._addOverlay(element.shape, {\r\n          x: element.shape.x,\r\n          y: element.shape.y + element.shape.height / 2\r\n        });\r\n      }\r\n    }\r\n\r\n    if (element.boundaries.after) {\r\n      if (element.shape.outgoing.length > 0) {\r\n        forEach(element.shape.outgoing, (connection) => {\r\n          if (connection.type !== 'bpmn:SequenceFlow') {\r\n            return;\r\n          }\r\n\r\n          // first waypoint of the outgoing connection\r\n          const waypoint = connection.waypoints[0];\r\n\r\n          self._addOverlay(element.shape, waypoint);\r\n        });\r\n      } else {\r\n        // no outgoing connection, calculate position after element\r\n        self._addOverlay(element.shape, {\r\n          x: element.shape.x + element.shape.width,\r\n          y: element.shape.y + element.shape.height / 2\r\n        });\r\n      }\r\n    }\r\n  });\r\n  this.active = true;\r\n};\r\n\r\n\r\n/**\r\n * Remove all transaction boundary overlays.\r\n */\r\nTransactionBoundaries.prototype.hide = function () {\r\n  this._overlays.remove({ type: 'transaction-boundaries' });\r\n\r\n  this.active = false;\r\n};\r\n\r\n\r\n/**\r\n * Toggle the visibility of transaction boundaries.\r\n */\r\nTransactionBoundaries.prototype.toggle = function () {\r\n  this.active ? this.hide() : this.show(); // eslint-disable-line\r\n};\r\n","/*\r\n * @Author: Snoopy\r\n * @ 功能：任务节点边界标注\r\n */\r\nimport TransactionBoundaries from './TransactionBoundaries';\r\n\r\nexport default {\r\n  __init__: ['transactionBoundaries'],\r\n  transactionBoundaries: ['type', TransactionBoundaries]\r\n};\r\n","import inherits from 'inherits';\r\nimport Modeler from 'bpmn-js/lib/Modeler';\r\nimport minimapModule from 'diagram-js-minimap';\r\nimport sketchyRendererModule from 'bpmn-js-sketchy';\r\nimport CustomPalette from './customPalette';\r\nimport KeyboardModule from './keyboard';\r\nimport CustomTranslate from './customTranslate';\r\nimport ResizeAllModule from './resizeAllRules';\r\nimport ColorPickerModule from './color-picker';\r\n// import PrioritiesModule from './taskPriorities';\r\n// import ReadOnly from './readOnly';\r\nimport transactionBoundaries from './transactionBoundaries';\r\n\r\n// 定制模型设计器及其依赖模块\r\nexport default function CustomModeler(options) {\r\n  Modeler.call(this, options);\r\n\r\n  // this.customElements = [];\r\n}\r\n\r\ninherits(CustomModeler, Modeler);\r\n\r\nCustomModeler.prototype._modules = [].concat(\r\n  CustomModeler.prototype._modules,\r\n  [\r\n    KeyboardModule\r\n  ],\r\n  [\r\n    CustomPalette\r\n  ],\r\n  [\r\n    CustomTranslate\r\n  ],\r\n  [\r\n    ResizeAllModule\r\n  ],\r\n  [\r\n    minimapModule\r\n  ],\r\n  [\r\n    sketchyRendererModule\r\n  ],\r\n  // [\r\n  //   PrioritiesModule\r\n  // ],\r\n  // [\r\n  //   ReadOnly\r\n  // ],\r\n  [\r\n    ColorPickerModule\r\n  ],\r\n  [\r\n    transactionBoundaries\r\n  ]\r\n);\r\n","/* eslint-disable */\r\nexport default [\r\n\r\n  {\r\n    customType: 'CustomTaskDemo',\r\n    imgDataUrl: 'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20960%20960%22%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M960%2060v839c0%2033-27%2061-60%2061H60c-33%200-60-27-60-60V60C0%2027%2027%200%2060%200h839c34%200%2061%2027%2061%2060z%22%2F%3E%3Cpath%20fill%3D%22%2352b415%22%20d%3D%22M217%20548a205%20205%200%200%200-144%2058%20202%20202%200%200%200-4%20286%20202%20202%200%200%200%20285%203%20200%20200%200%200%200%2048-219%20203%20203%200%200%200-185-128zM752%206a206%20206%200%200%200-192%20285%20206%20206%200%200%200%20269%20111%20207%20207%200%200%200%20111-260A204%20204%200%200%200%20752%206zM62%200A62%2062%200%200%200%200%2062v398l60%2046a259%20259%200%200%201%2089-36c5-28%2010-57%2014-85l99%202%2012%2085a246%20246%200%200%201%2088%2038l70-52%2069%2071-52%2068c17%2030%2029%2058%2035%2090l86%2014-2%20100-86%2012a240%20240%200%200%201-38%2089l43%2058h413c37%200%2060-27%2060-61V407a220%20220%200%200%201-44%2040l21%2085-93%2039-45-76a258%20258%200%200%201-98%201l-45%2076-94-39%2022-85a298%20298%200%200%201-70-69l-86%2022-38-94%2076-45a258%20258%200%200%201-1-98l-76-45%2040-94%2085%2022a271%20271%200%200%201%2041-47z%22%2F%3E%3C%2Fsvg%3E',\r\n    imgSelectedDataUrl: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA5NjAgOTYwIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNOTYwIDYwdjgzOWMwIDMzLTI3IDYxLTYwIDYxSDYwYy0zMyAwLTYwLTI3LTYwLTYwVjYwQzAgMjcgMjcgMCA2MCAwaDgzOWMzNCAwIDYxIDI3IDYxIDYweiIvPjxwYXRoIGZpbGw9ImhvdHBpbmsiIGQ9Ik0yMTcgNTQ4YTIwNSAyMDUgMCAwIDAtMTQ0IDU4IDIwMiAyMDIgMCAwIDAtNCAyODYgMjAyIDIwMiAwIDAgMCAyODUgMyAyMDAgMjAwIDAgMCAwIDQ4LTIxOSAyMDMgMjAzIDAgMCAwLTE4NS0xMjh6TTc1MiA2YTIwNiAyMDYgMCAwIDAtMTkyIDI4NSAyMDYgMjA2IDAgMCAwIDI2OSAxMTEgMjA3IDIwNyAwIDAgMCAxMTEtMjYwQTIwNCAyMDQgMCAwIDAgNzUyIDZ6TTYyIDBBNjIgNjIgMCAwIDAgMCA2MnYzOThsNjAgNDZhMjU5IDI1OSAwIDAgMSA4OS0zNmM1LTI4IDEwLTU3IDE0LTg1bDk5IDIgMTIgODVhMjQ2IDI0NiAwIDAgMSA4OCAzOGw3MC01MiA2OSA3MS01MiA2OGMxNyAzMCAyOSA1OCAzNSA5MGw4NiAxNC0yIDEwMC04NiAxMmEyNDAgMjQwIDAgMCAxLTM4IDg5bDQzIDU4aDQxM2MzNyAwIDYwLTI3IDYwLTYxVjQwN2EyMjAgMjIwIDAgMCAxLTQ0IDQwbDIxIDg1LTkzIDM5LTQ1LTc2YTI1OCAyNTggMCAwIDEtOTggMWwtNDUgNzYtOTQtMzkgMjItODVhMjk4IDI5OCAwIDAgMS03MC02OWwtODYgMjItMzgtOTQgNzYtNDVhMjU4IDI1OCAwIDAgMS0xLTk4bC03Ni00NSA0MC05NCA4NSAyMmEyNzEgMjcxIDAgMCAxIDQxLTQ3eiIvPjwvc3ZnPg==',\r\n    initProperties: {\r\n      name: '自定义任务', // 名称\r\n      class: 'class类', // 详情\r\n      // expression: '表达式',\r\n      // resultVariable: '结果变量',\r\n      // delegateExpression: '表达式',\r\n\r\n      asyncBefore: true, // 持续异步\r\n      // asyncAfter: true,\r\n      async: false,\r\n      exclusive: true, // 排除\r\n      jobPriority: 'first one', // 优先级\r\n      timeCycle: { // 重试时间周期\r\n        type: 'camunda:FailedJobRetryTimeCycle',\r\n        body: '33'\r\n      },\r\n      \r\n      documentation: { // 文档-元素文档\r\n        type: \"bpmn:Documentation\",\r\n        text: \"tests\"\r\n      },\r\n      listener: [ // 监听器\r\n        {\r\n          type: 'camunda:ExecutionListener',\r\n          values: {\r\n            class: 'classTest',\r\n            event: 'start',\r\n            fields: [\r\n              {\r\n                type: 'camunda:Field',\r\n                values: {\r\n                  name: \"name1\",\r\n                  string: \"value1\"\r\n                }\r\n              },{\r\n                type: 'camunda:Field',\r\n                values: {\r\n                  name: \"name2\",\r\n                  string: \"value2\"\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        }, {\r\n          type: 'camunda:ExecutionListener',\r\n          values: {\r\n            expression: 'expressionTest',\r\n            event: 'end',\r\n            fields: [\r\n              {\r\n                type: 'camunda:Field',\r\n                values: {\r\n                  name: \"name3\",\r\n                  string: \"value3\"\r\n                }\r\n              },{\r\n                type: 'camunda:Field',\r\n                values: {\r\n                  name: \"name4\",\r\n                  string: \"value4\"\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        },\r\n      ],\r\n      inputOutput: { // 输入输出\r\n        type: 'camunda:InputOutput',\r\n        values: {\r\n          inputParameters: [\r\n            {\r\n              type: 'camunda:InputParameter', \r\n              values: {\r\n                name: \"Input_1\",\r\n                value: \"input1\"\r\n              }\r\n            }, {\r\n              type: 'camunda:InputParameter', \r\n              values: {\r\n                name: \"Input_2\",\r\n                value: \"input2\"\r\n              }\r\n            }\r\n          ],\r\n          outputParameters: [\r\n            {\r\n              type: 'camunda:OutputParameter',\r\n              values: {\r\n                name: \"Output_1\",\r\n                value: \"output1\"\r\n              }\r\n            }, {\r\n              type: 'camunda:OutputParameter',\r\n              values: {\r\n                name: \"Output_2\",\r\n                value: \"output2\"\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      injectField: [ // 字段注入\r\n        { \r\n          type: 'camunda:Field',\r\n          values: {\r\n            name: \"stringName\",\r\n            string: \"stringValue\"\r\n          }\r\n        }, {\r\n          type: 'camunda:Field',\r\n          values: {\r\n            expression: \"express1\",\r\n            name: \"expressName\"\r\n          }\r\n        }, {\r\n          type: 'camunda:Field',\r\n          values: {\r\n            expression: \"express2\",\r\n            name: \"expressName2\"\r\n          }\r\n        }, \r\n      ],\r\n      extendProperties: { // 扩展字段\r\n        type: 'camunda:Properties',\r\n        values: [\r\n          {\r\n            type: 'camunda:Property',\r\n            values: {\r\n              name: 'key1',\r\n              value: 'value1'\r\n            }\r\n          }, {\r\n            type: 'camunda:Property',\r\n            values: {\r\n              name: 'key2',\r\n              value: 'value2'\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n]\r\n","import React from 'react';\r\nimport styles from './index.module.less';\r\n\r\nexport default function () {\r\n  return (\r\n    <div className={styles.header}>\r\n      <div className={styles['logo-container']}>\r\n        <h1 className={styles.systemName}>bpmn-react</h1>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './index.module.less';\r\n\r\nclass EditingTools extends Component {\r\n  static propTypes = {\r\n    onOpenFIle: PropTypes.func.isRequired,\r\n    onZoomIn: PropTypes.func.isRequired,\r\n    onZoomOut: PropTypes.func.isRequired,\r\n    onZoomReset: PropTypes.func.isRequired,\r\n    onUndo: PropTypes.func.isRequired,\r\n    onRedo: PropTypes.func.isRequired,\r\n    onSave: PropTypes.func.isRequired,\r\n    onDownloadXml: PropTypes.func.isRequired,\r\n    onDownloadSvg: PropTypes.func.isRequired\r\n  }\r\n\r\n  handleOpen = () => {\r\n    this.file.click();\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      onOpenFIle,\r\n      onZoomIn,\r\n      onZoomOut,\r\n      onZoomReset,\r\n      onUndo,\r\n      onRedo,\r\n      onSave,\r\n      onDownloadXml,\r\n      onDownloadSvg\r\n    } = this.props;\r\n    return (\r\n      <div className={styles.editingTools}>\r\n        <ul className={styles.controlList}>\r\n          <li className={`${styles.control} ${styles.line}`}>\r\n            <input\r\n              ref={(file) => {\r\n                this.file = file;\r\n              }}\r\n              className={styles.openFile}\r\n              type=\"file\"\r\n              onChange={onOpenFIle}\r\n            />\r\n            <button type=\"button\" title=\"打开\" onClick={this.handleOpen}>\r\n              <i className={styles.open} />\r\n            </button>\r\n          </li>\r\n\r\n          <li className={styles.control}>\r\n            <button type=\"button\" title=\"前进\" onClick={onUndo}>\r\n              <i className={styles.undo} />\r\n            </button>\r\n          </li>\r\n          <li className={`${styles.control} ${styles.line}`}>\r\n            <button type=\"button\" title=\"后退\" onClick={onRedo}>\r\n              <i className={styles.redo} />\r\n            </button>\r\n          </li>\r\n\r\n          <li className={styles.control}>\r\n            <button type=\"button\" title=\"还原\" onClick={onZoomReset}>\r\n              <i className={styles.zoom} />\r\n            </button>\r\n          </li>\r\n          <li className={styles.control}>\r\n            <button type=\"button\" title=\"放大\" onClick={onZoomIn}>\r\n              <i className={styles.zoomIn} />\r\n            </button>\r\n          </li>\r\n          <li className={`${styles.control} ${styles.line}`}>\r\n            <button type=\"button\" title=\"缩小\" onClick={onZoomOut}>\r\n              <i className={styles.zoomOut} />\r\n            </button>\r\n          </li>\r\n\r\n          <li className={styles.control}>\r\n            <button type=\"button\" title=\"保存\" onClick={onSave}>\r\n              <i className={styles.save} />\r\n            </button>\r\n          </li>\r\n          <li className={styles.control}>\r\n            <button type=\"button\" title=\"下载bpmn diagram\" onClick={onDownloadXml}>\r\n              <i className={styles.download} />\r\n            </button>\r\n          </li>\r\n          <li className={styles.control}>\r\n            <button type=\"button\" title=\"下载svg image\" onClick={onDownloadSvg}>\r\n              <i className={styles.image} />\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditingTools;\r\n","import React, { Component } from 'react';\r\nimport $ from 'jquery';\r\nimport axios from 'axios';\r\nimport propertiesPanelModule from 'bpmn-js-properties-panel';\r\nimport propertiesProviderModule from 'bpmn-js-properties-panel/lib/provider/camunda';\r\nimport camundaModdleDescriptor from 'camunda-bpmn-moddle/resources/camunda';\r\nimport { getBusinessObject } from 'bpmn-js/lib/util/ModelUtil';\r\nimport { isEmpty, isArray, debounce } from 'lodash';\r\nimport { message, notification } from 'antd';\r\nimport BpmnModeler from './modeler';\r\nimport { registerFileDrop } from '../utils';\r\n// import defaultData from '../resources/defaultData';\r\nimport { Header, EditingTools } from '../components';\r\nimport './Common.less';\r\nimport styles from './Bpmn.module.less';\r\n\r\naxios.defaults.retry = 4;\r\naxios.defaults.retryDelay = 1000;\r\nexport default class Bpmn extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      scale: 1, // 流程图比例\r\n      isShowPanel: true, // 是否展示propertiesPanel\r\n      isShowFold: false, // 是否展示propertiesPanel\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { xml, customData } = window;\r\n    // 初始化模型设计器\r\n    this.bpmnModeler = new BpmnModeler({\r\n      container: '#canvas',\r\n      propertiesPanel: {\r\n        parent: '#properties-panel'\r\n      },\r\n      additionalModules: [propertiesPanelModule, propertiesProviderModule],\r\n      moddleExtensions: {\r\n        camunda: camundaModdleDescriptor\r\n      },\r\n      bpmnRenderer: {\r\n        defaultFillColor: '#fff',\r\n        defaultStrokeColor: 'hotpink'\r\n      },\r\n      keyboard: { bindTo: document }\r\n    });\r\n\r\n    console.log('bpmnModeler: ', this.bpmnModeler);\r\n\r\n    // 导入xml\r\n    this.openDiagram(xml);\r\n\r\n    // 支持bpmn拖拽\r\n    if (!window.FileList || !window.FileReader) {\r\n      message.info('请使用高版本浏览！');\r\n    } else {\r\n      registerFileDrop($('#js-drop-zone')[0], this.openDiagram);\r\n    }\r\n\r\n    // * 预先设置扩展属性对象 *\r\n    const preProperties = customData.length && customData.map((item) => {\r\n      const { initProperties } = item;\r\n      const extensions = {\r\n        customType: item.customType, // 定制化任务节点的唯一标识\r\n        general: { // 常规属性\r\n          name: initProperties.name,\r\n        },\r\n        updateProperties: {}\r\n      };\r\n      // 统一处理需要 创建ModdleEelement 的属性\r\n      if (\r\n        initProperties.listener\r\n        || initProperties.inputOutput\r\n        || initProperties.injectField\r\n        || initProperties.extendProperties\r\n        || initProperties.timeCycle\r\n      ) {\r\n        extensions.updateProperties.extensionElements = this.extensionElements(initProperties);\r\n      }\r\n      // 文档 - 元素文档\r\n      if (initProperties.documentation) {\r\n        extensions.updateProperties.documentation = [this.documentation(initProperties)];\r\n      }\r\n      // 详情 - 实现方式\r\n      if (initProperties.class) {\r\n        extensions.general.class = initProperties.class;\r\n      }\r\n      if (initProperties.expression) {\r\n        extensions.general.expression = initProperties.expression;\r\n        extensions.general.resultVariable = initProperties.resultVariable || '';\r\n      }\r\n\r\n      if (initProperties.delegateExpression) {\r\n        extensions.general.delegateExpression = initProperties.delegateExpression;\r\n      }\r\n\r\n      // 持续异步\r\n      if (initProperties.asyncBefore !== undefined) {\r\n        if (initProperties.jobPriority) {\r\n          extensions.general.jobPriority = initProperties.jobPriority;\r\n        }\r\n        extensions.general.asyncBefore = initProperties.asyncBefore;\r\n        extensions.general.async = initProperties.async;\r\n        extensions.general.exclusive = initProperties.exclusive;\r\n      }\r\n      if (initProperties.asyncAfter !== undefined) {\r\n        extensions.general.asyncAfter = initProperties.asyncAfter;\r\n        extensions.general.async = initProperties.async;\r\n        extensions.general.exclusive = initProperties.exclusive;\r\n        if (initProperties.jobPriority) {\r\n          extensions.general.jobPriority = initProperties.jobPriority;\r\n        }\r\n      }\r\n      return extensions;\r\n    });\r\n    // console.log('preProperties: ', preProperties);\r\n\r\n    const modeling = this.bpmnModeler.get('modeling'); // 更新bussinessObject方法\r\n    this.bpmnModeler.on('element.changed', (event) => {\r\n      const { element } = event;\r\n      const { customType } = element;\r\n      const bo = getBusinessObject(element);\r\n      // console.log('event: ', event);\r\n      // console.log('bo: ', bo);\r\n\r\n      // id加前缀\r\n      let preId = '';\r\n      if (element && element.parent) {\r\n        preId = element.parent.id;\r\n      }\r\n      if (preId && bo.id.indexOf(preId) === -1) {\r\n        bo.id = `${preId}_${bo.id}`;\r\n      }\r\n\r\n      // 获取定制任务属性数据\r\n      const initData = customData.filter(item => item.customType === customType);\r\n      const initProperties = (initData.length && initData[0].initProperties) || {};\r\n      const preProperty = preProperties\r\n        && preProperties.filter(item => item.customType === customType)[0];\r\n      // console.log('preProperty: ', preProperty);\r\n\r\n      if (!isEmpty(initProperties) && bo.isNotInit === undefined) {\r\n        // console.log('event: ', event);\r\n        // console.log('id: ', bo.id);\r\n        bo.isNotInit = false;\r\n        // 常规属性\r\n        Object.keys(preProperty.general).forEach((item) => {\r\n          bo[item] = preProperty.general[item];\r\n        });\r\n        // 扩展属性\r\n        modeling.updateProperties(element, preProperty.updateProperties);\r\n      }\r\n    });\r\n  }\r\n\r\n  // 创建\r\n  openDiagram = (xml) => {\r\n    const _this = this;\r\n    this.setState({ isShowFold: true });\r\n    this.bpmnModeler.importXML(xml, (err) => {\r\n      if (err) {\r\n        // console.log('err: ', err);\r\n        message.error('模型加载有误！');\r\n      }\r\n      const defaultData = window.customData;\r\n      const eventBus = this.bpmnModeler.get('eventBus');\r\n      // 禁用编辑流程id\r\n      $('#properties-panel').find('#camunda-id').attr('disabled', true);\r\n      // 定制化任务节点禁用拖拽及双击编辑名称\r\n      eventBus.on('directEditing.activate', (event) => {\r\n        const name = event.active.context.text;\r\n        const isHasName = defaultData.filter((item) => {\r\n          return item.initProperties.name === name;\r\n        });\r\n        if (!isEmpty(isHasName)) {\r\n          $('.djs-direct-editing-parent').css('display', 'none');\r\n        }\r\n      });\r\n      eventBus.on('element.dblclick', 10000, (event) => {\r\n        const { element } = event;\r\n        const bo = getBusinessObject(element);\r\n        const { customType } = element;\r\n        const isHasName = defaultData.filter((item) => {\r\n          return item.initProperties.name === bo.name;\r\n        });\r\n        if (customType || !isEmpty(isHasName)) {\r\n          return false;\r\n        }\r\n      });\r\n      // 定制化任务节点禁止编辑id及名称\r\n      eventBus.on('selection.changed', (event) => {\r\n        const { newSelection } = event;\r\n        // console.log('event: ', event);\r\n        if (isEmpty(newSelection)) {\r\n          $('#properties-panel').find('#camunda-id').attr('disabled', true);\r\n          $('#properties-panel').find('#camunda-id').next().css('display', 'none');\r\n        }\r\n        if (newSelection[0]) {\r\n          const shape = newSelection[0];\r\n          const bo = getBusinessObject(shape);\r\n          const { customType } = shape;\r\n          const isHasName = defaultData.filter((item) => {\r\n            return item.initProperties.name === bo.name;\r\n          });\r\n          if (customType || !isEmpty(isHasName)) {\r\n            $('#properties-panel').find('#camunda-name').attr('contenteditable', false);\r\n          }\r\n        }\r\n      });\r\n      // 禁用所有属性（不包括类似 名称的textbox）\r\n      // eventBus.on('propertiesPanel.isPropertyEditable', 10000, (event) => {\r\n      //   // console.log('event: ', event);\r\n      //   const { element } = event;\r\n      //   const bo = getBusinessObject(element);\r\n      //   const { name } = bo;\r\n      //   const isHasName = defaultData.filter((item) => {\r\n      //     return item.initProperties.name === name;\r\n      //   });\r\n      //   if (bo.customType || !isEmpty(isHasName)) {\r\n      //     return false;\r\n      //   }\r\n      // });\r\n\r\n      // 显示任务边界\r\n      const transactionBoundaries = _this.bpmnModeler.get('transactionBoundaries');\r\n      transactionBoundaries.hide();\r\n\r\n      // 显示自定义任务弹窗\r\n      $('#canvas').on('click', '[data-action=\"create.add-custom-tasks\"]', () => {\r\n        // console.log($(this));\r\n      });\r\n    });\r\n  }\r\n\r\n  /*\r\n  * 定制任务，固化属性\r\n  */\r\n  createModdleElement = (type, values) => {\r\n    // console.log('this.bpmnModeler: ', this.bpmnModeler);\r\n    const moddle = this.bpmnModeler.get('moddle'); // 创建ModdleEelement\r\n    return moddle.create(type, values);\r\n  }\r\n\r\n  setEelementProperties = (values) => {\r\n    // console.log('values: ', values);\r\n    return values.map((item) => {\r\n      return this.createModdleElement(item.type, item.values);\r\n    });\r\n  }\r\n\r\n  // 重试时间周期\r\n  failedJobRetryTimeCycle = (initProperties) => {\r\n    return this.createModdleElement(\r\n      initProperties.timeCycle.type, { body: initProperties.timeCycle.body }\r\n    );\r\n  }\r\n\r\n  // 元素文档\r\n  documentation = (initProperties) => {\r\n    return this.createModdleElement(initProperties.documentation.type,\r\n      { text: initProperties.documentation.text });\r\n  }\r\n\r\n  // 监听器\r\n  camundaExecutionListener = (initProperties) => {\r\n    return initProperties.listener.map((item) => {\r\n      const fields = item.values.fields\r\n        ? this.setEelementProperties(item.values.fields)\r\n        : undefined;\r\n      item.values.fields = fields;\r\n      return this.createModdleElement(item.type, item.values);\r\n    });\r\n  }\r\n\r\n  // 输入输出\r\n  camundaInputOutput = (initProperties) => {\r\n    return this.createModdleElement(initProperties.inputOutput.type,\r\n      {\r\n        inputParameters: initProperties.inputOutput.values.inputParameters\r\n          ? this.setEelementProperties(initProperties.inputOutput.values.inputParameters)\r\n          : [],\r\n        outputParameters: initProperties.inputOutput.values.outputParameters\r\n          ? this.setEelementProperties(initProperties.inputOutput.values.outputParameters)\r\n          : []\r\n      });\r\n  }\r\n\r\n  // 字段注入\r\n  camundaInjectField = (initProperties) => {\r\n    return this.setEelementProperties(initProperties.injectField);\r\n  }\r\n\r\n  // 扩展属性\r\n  camundaProperties = (initProperties) => {\r\n    return this.createModdleElement(initProperties.extendProperties.type,\r\n      {\r\n        values: initProperties.extendProperties.values\r\n          ? this.setEelementProperties(initProperties.extendProperties.values)\r\n          : []\r\n      });\r\n  }\r\n\r\n  // 扩展\r\n  extensionElements = (initProperties) => {\r\n    const values = [];\r\n    if (initProperties.listener) {\r\n      values.push(...(this.camundaExecutionListener(initProperties)));\r\n    }\r\n    if (initProperties.inputOutput) {\r\n      values.push(this.camundaInputOutput(initProperties));\r\n    }\r\n    if (initProperties.injectField) {\r\n      values.push(...(this.camundaInjectField(initProperties)));\r\n    }\r\n    if (initProperties.extendProperties) {\r\n      values.push(this.camundaProperties(initProperties));\r\n    }\r\n    if (initProperties.timeCycle) {\r\n      values.push(this.failedJobRetryTimeCycle(initProperties));\r\n    }\r\n    return this.createModdleElement('bpmn:ExtensionElements', {\r\n      values: [...values]\r\n    });\r\n  }\r\n\r\n  // 导入xml文件\r\n  handleOpenFile = (e) => {\r\n    const that = this;\r\n    const file = e.target.files[0];\r\n    const reader = new FileReader();\r\n    let data = '';\r\n    reader.readAsText(file);\r\n    reader.onload = function (event) {\r\n      data = event.target.result;\r\n      that.openDiagram(data, 'open');\r\n    };\r\n  };\r\n\r\n  // 保存\r\n  handleSave = () => {\r\n    // 获取边界事件\r\n    // const elementRegistry = this.bpmnModeler.get('elementRegistry');\r\n    // let messages = elementRegistry.filter((element) => {\r\n    //   const bo = getBusinessObject(element);\r\n    //   const eventDefinition = bo.eventDefinitions && bo.eventDefinitions[0];\r\n    //   console.log('element: ', element);\r\n    //   return is(element, 'bpmn:BoundaryEvent')\r\n    //         && !element.labelTarget && eventDefinition.$type === 'bpmn:MessageEventDefinition';\r\n    // });\r\n    // console.log('message1: ', messages);\r\n    // messages = messages.map((element) => {\r\n    //   return getBusinessObject(element).eventDefinitions[0].messageRef;\r\n    // });\r\n    // console.log('message: ', messages);\r\n    notification.destroy();\r\n    const { modelId } = this.state;\r\n    let jsonXml = '';\r\n    let svgXml = '';\r\n    this.bpmnModeler.saveXML({ format: true }, (err, xml) => {\r\n      jsonXml = xml;\r\n    });\r\n    this.bpmnModeler.saveSVG({ format: true }, (err, data) => {\r\n      svgXml = data;\r\n    });\r\n    const formData = {\r\n      jsonXml,\r\n      svgXml,\r\n      modelId\r\n    };\r\n    // console.log('jsonXml: ', jsonXml);\r\n    axios({\r\n      url: '/web/model/v1/saveModel',\r\n      method: 'post',\r\n      data: { ...formData },\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded'\r\n      },\r\n      transformRequest: [(data) => {\r\n        let ret = '';\r\n        for (const it in data) {\r\n          ret += `${encodeURIComponent(it)}=${encodeURIComponent(data[it])}&`;\r\n        }\r\n        return ret;\r\n      }],\r\n    }).then((res) => {\r\n      res = res.data;\r\n      if (res.success) {\r\n        message.success(res.message);\r\n      } else {\r\n        message.error(res.message);\r\n      }\r\n      if (res.data && isArray(res.data) && !isEmpty(res.data)) {\r\n        res.data.forEach((notice) => {\r\n          const args = {\r\n            message: `${notice.activityName || notice.activityId || ''}`,\r\n            description: `${notice.defaultDescription}`,\r\n            duration: 0,\r\n          };\r\n          notification.warn(args);\r\n        });\r\n      }\r\n    }).catch(() => {\r\n      message.error('模型设计保存失败！');\r\n    });\r\n  };\r\n\r\n  // 前进\r\n  handleRedo = () => {\r\n    console.log(this.bpmnModeler.get('commandStack'));\r\n    this.bpmnModeler.get('commandStack').redo();\r\n  };\r\n\r\n  // 后退\r\n  handleUndo = () => {\r\n    this.bpmnModeler.get('commandStack').undo();\r\n  };\r\n\r\n  // 下载xml/svg\r\n  download = (type, data, name) => {\r\n    const { modelId } = this.state;\r\n    let dataTrack = '';\r\n    const a = document.createElement('a');\r\n    switch (type) {\r\n      case 'xml':\r\n        dataTrack = 'bpmn';\r\n        break;\r\n      case 'svg':\r\n        dataTrack = 'svg';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    name = name || `${modelId}_diagram.${dataTrack}`;\r\n    a.setAttribute('href', `data:application/bpmn20-xml;charset=UTF-8,${encodeURIComponent(data)}`);\r\n    a.setAttribute('target', '_blank');\r\n    a.setAttribute('dataTrack', `diagram:download-${dataTrack}`);\r\n    a.setAttribute('download', name);\r\n\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n  };\r\n\r\n  // 下载SVG格式\r\n  handleDownloadSvg = () => {\r\n    this.bpmnModeler.saveSVG({ format: true }, (err, data) => {\r\n      this.download('svg', data);\r\n    });\r\n  };\r\n\r\n  // 下载XML格式\r\n  handleDownloadXml = () => {\r\n    this.bpmnModeler.saveXML({ format: true }, (err, data) => {\r\n      this.download('xml', data);\r\n    });\r\n  };\r\n\r\n  // 流程图放大缩小\r\n  handleZoom = (radio) => {\r\n    const { scale } = this.state;\r\n    const newScale = !radio\r\n      ? 1.0 // 不输入radio则还原\r\n      : scale + radio <= 0.2 // 最小缩小倍数\r\n        ? 0.2\r\n        : scale + radio;\r\n\r\n    this.bpmnModeler.get('canvas').zoom(newScale);\r\n    this.setState({\r\n      scale: newScale\r\n    });\r\n  };\r\n\r\n  // 折叠\r\n  handlePanelFold = () => {\r\n    // console.log('test')\r\n    const { isShowPanel } = this.state;\r\n    this.setState({\r\n      isShowPanel: !isShowPanel,\r\n    }, () => {\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { isShowPanel, isShowFold } = this.state;\r\n    // console.log(isShowPanel);\r\n    return (\r\n      <React.Fragment>\r\n        <Header />\r\n        <div className={styles.container} id=\"js-drop-zone\">\r\n          <div className={styles.canvas} id=\"canvas\" />\r\n          <div\r\n            className={\r\n              `properties-panel-fold\r\n              ${isShowPanel ? '' : 'fold'}\r\n              ${isShowFold ? '' : 'hide'}\r\n              `\r\n            }\r\n            id=\"js-panel-fold\"\r\n            title=\"折叠\"\r\n            onClick={this.handlePanelFold}\r\n          />\r\n          <div\r\n            className={`properties-panel-parent ${isShowPanel ? '' : 'hidePanel'}`}\r\n            id=\"properties-panel\"\r\n            style={{ height: '100%' }}\r\n          />\r\n          <EditingTools\r\n            onOpenFIle={this.handleOpenFile}\r\n            onSave={debounce(this.handleSave, 300)}\r\n            onUndo={this.handleUndo}\r\n            onRedo={this.handleRedo}\r\n            onDownloadSvg={this.handleDownloadSvg}\r\n            onDownloadXml={this.handleDownloadXml}\r\n            onZoomIn={() => this.handleZoom(0.1)}\r\n            onZoomOut={() => this.handleZoom(-0.1)}\r\n            onZoomReset={() => this.handleZoom()}\r\n          />\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","/* eslint-disable */\r\nimport $ from 'axios';\r\nimport { isEmpty } from 'lodash';\r\nimport defaultData from '../resources/defaultData';\r\n\r\n// 地址栏参数\r\nexport function parseURL(url) {\r\n  let a =  document.createElement('a');\r\n  a.href = url;\r\n  return {\r\n    source: url,\r\n    protocol: a.protocol.replace(':',''),\r\n    host: a.hostname,\r\n    port: a.port,\r\n    query: a.search,\r\n    params: (function(){\r\n      let ret = {},\r\n        seg = a.search.replace(/^\\?/,'').split('&'),\r\n        len = seg.length, i = 0, s;\r\n      for (;i<len;i++) {\r\n        if (!seg[i]) { continue; }\r\n        s = seg[i].split('=');\r\n        ret[s[0]] = s[1];\r\n      }\r\n      return ret;\r\n    })(),\r\n    file: (a.pathname.match(/\\/([^\\/?#]+)$/i) || [,''])[1],\r\n    hash: a.hash.replace('#',''),\r\n    path: a.pathname.replace(/^([^\\/])/,'/$1'),\r\n    relative: (a.href.match(/tps?:\\/\\/[^\\/]+(.+)/) || [,''])[1],\r\n    segments: a.pathname.replace(/^\\//,'').split('/'),\r\n    getReq: function(){\r\n      let url = a.search, strs;\r\n      let theRequest = new Object();\r\n      if(url.indexOf(\"?\") != -1) {\r\n        let str = url.substr(1) ;\r\n        strs = str.split(\"&\");\r\n        for(let i = 0; i < strs.length; i ++) {\r\n          theRequest[strs[i].split(\"=\")[0]] = strs[i].split(\"=\")[1];\r\n        }\r\n      }\r\n      return theRequest;\r\n    },\r\n  };\r\n}\r\n\r\n// 拖拽\r\nexport function registerFileDrop(container, callback) {\r\n  function handleFileSelect(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    const files = e.dataTransfer.files;\r\n\r\n    const file = files[0];\r\n\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = function(e) {\r\n      // console.log('e: ', e);\r\n      const xml = e.target.result;\r\n\r\n      callback(xml);\r\n    };\r\n\r\n    reader.readAsText(file);\r\n  }\r\n\r\n  function handleDragOver(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    e.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.\r\n  }\r\n\r\n  container.addEventListener('dragover', handleDragOver, false);\r\n  container.addEventListener('drop', handleFileSelect, false);\r\n}\r\n\r\nexport function getCustomJson() {\r\n  return $.get('/service/editor/bpmn/custom/componentJson', {timeout: 1000});\r\n}\r\nexport function getXml(modelId) {\r\n  return $.get(`/web/flow/v1/openModelXml?modelId=${modelId}`, {timeout: 1000,});\r\n}","import React, { Component } from 'react';\nimport { Spin } from 'antd';\nimport BpmnModeler from './containers';\nimport defaultData from './resources/defaultData';\nimport diagramXML from './resources/newDiagram';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      isCustomLoaded: false,\n      isXmlLoaded: false,\n    };\n  }\n\n  componentWillMount() {\n    // 获取自定义任务json\n    window.xml = diagramXML;\n    window.customData = defaultData; // 或者存 localstorage 中\n    this.setState({ isCustomLoaded: true, isXmlLoaded: true });\n  }\n\n  render() {\n    const { isCustomLoaded, isXmlLoaded } = this.state;\n    return (\n      <div style={{ height: '100%', width: '100%', overflow: 'hidden' }}>\n        {\n          !isCustomLoaded || !isXmlLoaded\n            ? <Spin tip=\"玩命加载中...\" /> : <BpmnModeler />\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n","export default `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<bpmn2:definitions\r\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n  xmlns:bpmn2=\"http://www.omg.org/spec/BPMN/20100524/MODEL\"\r\n  xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\"\r\n  xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\"\r\n  xmlns:di=\"http://www.omg.org/spec/DD/20100524/DI\"\r\n  xsi:schemaLocation=\"http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd\"\r\n  id=\"sample-diagram\"\r\n  targetNamespace=\"http://bpmn.io/schema/bpmn\"\r\n>\r\n  <bpmn2:process id=\"Process_1\" isExecutable=\"false\">\r\n    <bpmn2:startEvent id=\"StartEvent_1\"/>\r\n  </bpmn2:process>\r\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_1\">\r\n    <bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_1\">\r\n      <bpmndi:BPMNShape id=\"_BPMNShape_StartEvent_2\" bpmnElement=\"StartEvent_1\">\r\n        <dc:Bounds height=\"36.0\" width=\"36.0\" x=\"412.0\" y=\"240.0\"/>\r\n      </bpmndi:BPMNShape>\r\n    </bpmndi:BPMNPlane>\r\n  </bpmndi:BPMNDiagram>\r\n</bpmn2:definitions>`;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'babel-polyfill';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root')); // eslint-disable-line\n"],"sourceRoot":""}